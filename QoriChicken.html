<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Qori Chicken â€¢ Pacha Eats</title>

  <style>
    :root{
      --text:#111827;
      --muted:#6b7280;

      --brand:#e21f0c;      /* header/footer */
      --bg:#f5ebdc;         /* fondo */
      --heroArrow:#d62300;  /* botones */
      --shadow: 0 14px 30px rgba(17,24,39,.10);
      --shadow2: 0 10px 22px rgba(17,24,39,.09);
      --shadow3: 0 18px 40px rgba(17,24,39,.14);

      --radiusHeader: 48px;
      --radiusPill: 999px;
      --radiusCard: 18px;

      --max: 1180px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    button,input,select{font:inherit}
    .container{max-width:var(--max); margin:0 auto; padding:0 14px;}
    .sr-only{
      position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
    }

    /* ================= HEADER ================= */
    header{
      position:sticky;
      top:0;
      z-index:60;
      background: rgba(245,235,220,.88);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(0,0,0,.06);
      transition: transform .22s ease;
      will-change: transform;
    }
    header.is-hidden{ transform: translateY(-110%); }

    .header-wrap{padding:4px 0 4px;}
    .header-bar{
      background: var(--brand);
      border-radius: var(--radiusHeader);
      box-shadow: var(--shadow3);
      padding:4px 4px;
      display:flex;
      align-items:center;
      gap:10px;
      overflow:hidden;
      position:relative;
    }
    .header-bar::after{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(120px 120px at 14% 0%, rgba(255,255,255,.16), transparent 60%),
        radial-gradient(160px 160px at 82% 20%, rgba(255,255,255,.12), transparent 60%),
        radial-gradient(220px 220px at 50% 120%, rgba(0,0,0,.14), transparent 60%);
      pointer-events:none;
      mix-blend-mode: screen;
    }

    .logo{
      width:36px; height:36px;
      border-radius:0;
      display:grid; place-items:center;
      overflow:visible;
      flex:0 0 auto;
      background: transparent;
      border:none;
      box-shadow:none;
      z-index:1;
      margin-bottom: 7px;
      margin-left: 14px;
      margin-top: 1px;
      margin-right: 0px;
    }
    .logo img{width:100%; height:100%; object-fit:contain; padding:0;}

    .search{
      display:flex;
      align-items:center;
      gap:10px;
      background:#fff;
      border-radius: var(--radiusPill);
      padding:11px 12px;
      flex: 1 1 360px;
      min-width: 200px;
      box-shadow: var(--shadow2);
      z-index:1;
      border:1px solid rgba(229,231,235,.85);
    }
    .search input{
      border:none;
      outline:none;
      width:100%;
      min-width:0;
      font-size:14px;
    }
    .search input::placeholder{color:#9ca3af}

    .info-block{
      color:#fff;
      display:flex;
      align-items:center;
      gap:10px;
      padding:8px 10px;
      border-radius:16px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.18);
      white-space:nowrap;
      flex:0 0 auto;
      z-index:1;
    }
    .info-block .icon{width:28px; height:28px; display:grid; place-items:center; flex:0 0 auto;}
    .info-block.delivery .icon{ width:36px; height:36px; }
    .info-block .lines{display:flex; flex-direction:column; line-height:1.08; gap:2px;}
    .info-block .top{font-weight:950; font-size:13px;}
    .info-block .bottom{font-weight:750; font-size:12px; opacity:.95;}
    .info-block .chev{margin-left:2px; font-weight:900; width:16px; display:grid; place-items:center;}

    .cart-pill{
      display:flex;
      align-items:center;
      gap:10px;
      background:#fff;
      border-radius: var(--radiusPill);
      padding:10px 10px;
      box-shadow: var(--shadow2);
      flex:0 0 auto;
      cursor:pointer;
      border:1px solid rgba(229,231,235,.85);
      z-index:1;
    }
    .cart-pill .total-badge{
      background: var(--brand);
      color:#fff;
      border-radius: 999px;
      padding:7px 10px;
      font-weight:900;
      font-size:12px;
      line-height:1;
      min-width:92px;
      text-align:center;
      box-shadow: 0 12px 22px rgba(226,31,12,.24);
    }

    /* Hover micro */
    button, .btn, a.btn, .product-card, .info-block, .cart-pill {
      transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
    }
    button:hover, .btn:hover, a.btn:hover, .product-card:hover, .info-block:hover, .cart-pill:hover {
      transform: scale(1.03);
    }

    main{padding: 12px 0 44px;}

    /* ===== Restaurant hero ===== */
    .rest-hero{
      background: rgba(255,255,255,.88);
      border:1px solid rgba(0,0,0,.08);
      border-radius: 22px;
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .rest-hero-inner{
      padding: 10px 12px;
      display:flex;
      gap:15px;
      align-items:center;
      flex-wrap:wrap;
      min-height: 0 !important;
    }
    .rest-logo{
      width: 195px;
      height: 150px;
      border-radius: 0;
      background: transparent;
      border: none;
      box-shadow: none;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow: visible;
      flex:0 0 auto;

      position: relative;
      padding-right: 8px;
      margin-right: 8px;
    }
    .rest-logo::after{
      content:"";
      position:absolute;
      right: 0;
      top: 50%;
      height: 70%;
      transform: translateY(-50%);
      width: 1px;
      background: rgba(107,114,128,.25);
    }
    .rest-logo img{width:195px; height:150px; object-fit:contain;}

    .rest-copy{
      display:flex;
      flex-direction:column;
      justify-content:center;
    }
    .rest-copy p{
      margin:1px 0 0;
      color:#374151;
      font-size: 13.5px;
      line-height: 1.35;
    }

    /* ===== UbicaciÃ³n + rating (PRO) ===== */
    .rest-meta{
      display:flex;
      justify-content: flex-start;;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom: 6px;
      text-align: left;
    }
    .rest-loc{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      font-weight:950;
      font-size:12px;
      color:#9a3412;
      background: rgba(249,115,22,.12);
      border:1px solid rgba(249,115,22,.35);
      box-shadow: 0 10px 18px rgba(17,24,39,.05);
      width: fit-content;
    }
    .rest-loc .ico{display:grid; place-items:center;}
    .rest-rating{
      border:none;
      background: rgba(255,255,255,.92);
      border:1px solid rgba(0,0,0,.10);
      border-radius:999px;
      padding:6px 10px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      cursor:pointer;
      box-shadow: 0 10px 18px rgba(17,24,39,.05);
    }
    .rest-rating .stars{display:inline-flex; gap:2px; align-items:center;}
    .rest-rating .stars svg{width:14px;height:14px; fill:#f59e0b; display:block;}
    .rest-rating .rating-text{font-size:12px; color:#111827; font-weight:850; white-space:nowrap;}
    .rest-rating .chev{ font-weight:950; color:#6b7280; margin-left:2px; }

    .rest-hours{
      position: relative;
      padding-left: 15px;
      padding-right: 10px;
      margin:1px 10px 1px 10px;
      min-width: 150px;
      display:flex;
      flex-direction: column;
      justify-content: center;
    }
    .rest-hours::before{
      content:"";
      position:absolute;
      left: 0;
      top: 50%;
      height: 150%;
      transform: translateY(-50%);
      width: 1px;
      background: rgba(107,114,128,.25);
    }
    .rest-hours-title{
      font-weight: 950;
      font-size: 13px;
      color: #111827;
      margin-bottom: 1px;
    }
    .rest-hours-time{
      font-size: 13px;
      color: #374151;
      line-height: 1.35;
    }

    /* ===== Estado abierto/cerrado ===== */
    .rest-status{
      display:inline-flex;
      align-items:center;
      gap:8px;
      width: fit-content;
      padding:6px 10px;
      border-radius: 999px;
      font-weight: 950;
      font-size: 12px;
      letter-spacing: .2px;
      margin-bottom: 6px;
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 18px rgba(17,24,39,.06);
    }
    .rest-status::before{
      content:"";
      width:9px;height:9px;
      border-radius:999px;
      background: currentColor;
      box-shadow: 0 0 0 4px rgba(0,0,0,.04);
    }
    .rest-status.open{
      color:#065f46;
      background: rgba(16,185,129,.12);
      border-color: rgba(16,185,129,.35);
    }
    .rest-status.closed{
      color:#991b1b;
      background: rgba(239,68,68,.12);
      border-color: rgba(239,68,68,.35);
    }

    /* ===== Tabs ===== */
    .tabs{ margin-top: 12px; position: static; }
    .tabs-inner{
      background: rgba(245,235,220,.92);
      backdrop-filter: blur(8px);
      border-radius: 999px;
      border:1px solid rgba(0,0,0,.08);
      box-shadow: 0 12px 26px rgba(17,24,39,.08);
      padding: 8px;
      display:flex;
      gap:8px;
      overflow:auto;
      scrollbar-width:none;
    }
    .tabs-inner::-webkit-scrollbar{display:none}
    .tab{
      border:none;
      border-radius: 999px;
      padding: 10px 12px;
      background:#fff;
      border:1px solid rgba(0,0,0,.10);
      font-weight: 950;
      font-size: 13px;
      cursor:pointer;
      white-space:nowrap;
    }
    .tab.active{
      background: var(--brand);
      color:#fff;
      border-color: var(--brand);
      box-shadow: 0 14px 22px rgba(226,31,12,.20);
    }

    /* ===== Grid productos ===== */
    .block{ margin-top: 14px; }
    .block-title{
      margin: 18px 0 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .block-title h3{ margin:0; font-size: 18px; font-weight: 950; }
    .block-title small{color: var(--muted); font-weight: 800;}
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap:14px;
    }

    .p-card{
      border-radius: 14px;
      background:#fff;
      border:1px solid rgba(0,0,0,.08);
      box-shadow: var(--shadow2);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      padding: 14px 14px 16px;
      min-height: 250px;
    }
    .p-imgbox{
      height: 150px;
      border-radius: 12px;
      background: #ffffff;
      display:grid;
      place-items:center;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.06);
    }
    .p-imgbox img{
      width:100%;
      height:100%;
      object-fit:contain;
    }
    .p-imgbox .ph{
      width:100%;
      height:100%;
      display:grid;
      place-items:center;
      color:#6b7280;
      font-weight:950;
      font-size:12px;
      background: linear-gradient(180deg, #fff, #fff6ef);
    }
    .p-name{
      margin: 12px 0 0;
      font-weight: 950;
      font-size: 13.5px;
      line-height: 1.15;
      min-height: 34px;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    .p-desc{
      margin: 8px 0 0;
      color:#4b5563;
      font-size: 12.5px;
      line-height: 1.3;
      display:-webkit-box;
      -webkit-line-clamp:3;
      -webkit-box-orient:vertical;
      overflow:hidden;
      min-height: 48px;
    }
    .p-price{
      margin-top: 10px;
      font-weight: 950;
      font-size: 15px;
      color:#111827;
    }
    .p-actions{
      margin-top:auto;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      padding-top: 12px;
    }
    .p-add{
      border-radius: 999px;
      padding: 10px 12px;
      background:#fff;
      border: 2px solid var(--brand);
      color: var(--brand);
      font-weight: 950;
      cursor:pointer;
      box-shadow: 0 10px 18px rgba(17,24,39,.05);
      transition: transform .08s ease, background .15s ease, filter .15s ease;
      width: 170px;
    }
    .p-add:hover{background: rgba(226,31,12,.06); filter:brightness(1.02);}
    .p-add:active{transform: translateY(1px);}

    /* ================= MODAL PERSONALIZAR ================= */
    #customModal {
      display: none;
      position: fixed;
      inset: 0;
      align-items: center;
      justify-content: center;
      background: rgba(17,24,39,.55);
      z-index: 9999;
      padding: 18px;
    }
    #customModal.show { display: flex; }

    .custom-sheet{
      max-width: 640px;
      width: min(640px, 100%);
      max-height: calc(100vh - 36px);
      background:#fff;
      border-radius: 22px;
      overflow:hidden;
      box-shadow: 0 28px 80px rgba(0,0,0,.35);
      border:1px solid rgba(0,0,0,.10);
      display:flex;
      flex-direction:column;
    }
    .custom-head{
      position: sticky;
      top: 0;
      z-index: 5;
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      padding:14px;
      border-bottom: 1px solid rgba(0,0,0,.10);
      background: var(--brand);
    }
    .custom-title{margin:0; font-size:20px; font-weight:950; color:#fff; line-height:1.1;}
    .custom-sub{margin:6px 0 0; color: rgba(255,255,255,.92); font-size:13px; line-height:1.35;}
    .xbtn{
      border:none;
      background:#f3f4f6;
      border:1px solid rgba(0,0,0,.10);
      border-radius:14px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:950;
      flex:0 0 auto;
    }
    .custom-body{
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:14px;
      overflow-y:auto;
      -webkit-overflow-scrolling: touch;
      flex: 1 1 auto;
    }
    .opt-card{
      border:1px solid rgba(0,0,0,.08);
      border-radius:18px;
      padding:12px;
      background:#fff;
      box-shadow: 0 10px 18px rgba(17,24,39,.06);
    }
    .opt-card h4{margin:0 0 10px; font-size:14px; font-weight:950;}
    .opt-grid{display:grid; grid-template-columns: 1fr 1fr; gap:10px;}
    .opt{
      border:1px solid rgba(0,0,0,.08);
      border-radius:16px;
      padding:10px;
      display:flex;
      gap:10px;
      align-items:flex-start;
      cursor:pointer;
      user-select:none;
      background:#fff;
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;
      position: relative;
    }
    .opt.is-checked{
      border-color: var(--brand);
      background: rgba(226,31,12,.05);
      box-shadow: 0 10px 18px rgba(226,31,12,.15);
    }
    .opt:active{ transform: scale(.98); }
    .opt:hover{background:#fafafa}
    .opt input{margin-top:2px}
    .opt small{color:#6b7280; display:block; margin-top:3px}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;}
    .qty-box{display:flex; align-items:center; gap:8px;}
    .qty-btn{
      width:38px;height:38px;border-radius:14px;border:1px solid rgba(0,0,0,.10);
      background:#f3f4f6;font-weight:950;cursor:pointer;
    }
    .qty-num{min-width:26px;text-align:center;font-weight:950;}
    .add-btn{
      border-radius:999px;
      border:none;
      background: var(--brand);
      color:#fff;
      font-weight:950;
      width: 100%;
      font-size: 15px;
      padding: 14px 16px;
      cursor:pointer;
      box-shadow: 0 16px 30px rgba(226,31,12,.20);
    }
    .custom-footer{
      position: sticky;
      bottom: 0;
      z-index: 4;
      background: linear-gradient(180deg, rgba(255,255,255,.85), #fff 40%);
      border-top: 1px solid rgba(0,0,0,.10);
    }
    .req-note{
      font-size: 12px;
      color:#6b7280;
      margin-top:-6px;
    }

    /* ================= RESEÃ‘AS (MODAL) ================= */
    #reviewsModal{display:none; position:fixed; inset:0; background:rgba(17,24,39,.55); z-index:9999; padding:18px;}
    #reviewsModal.show{display:flex; align-items:center; justify-content:center;}
    .reviews-sheet{
      max-width: 620px;
      width: min(620px, 100%);
      max-height: calc(100vh - 36px);
      background:#fff;
      border-radius:22px;
      overflow:hidden;
      box-shadow: 0 28px 80px rgba(0,0,0,.35);
      border:1px solid rgba(0,0,0,.10);
      display:flex;
      flex-direction:column;
    }
    .reviews-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px;
      border-bottom: 1px solid rgba(0,0,0,.10);
      background: linear-gradient(180deg, #fff, #fff6ef);
    }
    .reviews-body{
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:10px;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
    }
    .rev-card{
      border:1px solid rgba(0,0,0,.10);
      border-radius:18px;
      padding:12px;
      box-shadow: 0 10px 18px rgba(17,24,39,.06);
      background:#fff;
    }
    .rev-top{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:6px;}
    .rev-name{font-weight:950; font-size:13px;}
    .rev-date{color:#6b7280; font-size:12px; font-weight:800;}
    .rev-stars{display:flex; gap:2px; align-items:center;}
    .rev-stars svg{width:13px;height:13px; fill:#f59e0b;}
    .rev-text{color:#374151; font-size:13px; line-height:1.35; margin:8px 0 0;}

    /* ================= CARRITO (MODAL) ================= */
    #cartModal{display:none; position:fixed; inset:0; background:rgba(17,24,39,.55); z-index:9999;}
    .cart-sheet{
      max-width:560px;
      margin:60px auto;
      background:#fff;
      border-radius:22px;
      overflow:hidden;
      box-shadow: 0 28px 80px rgba(0,0,0,.35);
      border:1px solid rgba(0,0,0,.10);
    }

    /* ================= FOOTER ================= */
    footer{
      background: var(--brand);
      color:#fff;
      margin-top: 0;
      padding-top: 18px;
    }
    footer .fcol, footer, footer p, footer a { font-size: calc(1rem + 1px); }
    .footer-inner{
      padding: 26px 0;
      display:grid;
      grid-template-columns: 1.2fr 1fr 1fr 1.2fr;
      gap:18px;
    }
    .f-title{
      font-weight:950;
      margin: 0 0 10px;
      font-size:14px;
      color:#fff;
    }
    .f-muted{color: rgba(255,255,255,.86); font-size:13px; margin:0 0 10px; line-height:1.35;}
    .f-links{display:flex; flex-direction:column; gap:8px; font-size:13px; color: rgba(255,255,255,.90);}
    .f-links a{color: rgba(255,255,255,.92)}
    .f-links a:hover{text-decoration:underline;color:#fff}
    .footer-logo{
      width: 120px;
      height:auto;
      margin-bottom: 10px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.18));
    }
    .contact-lines{font-size:13px;color: rgba(255,255,255,.92);display:flex;flex-direction:column;gap:8px;}
    .social{display:flex; gap:10px; align-items:center; margin-top:10px;}
    .social a{
      width:34px;height:34px;border-radius:999px;
      background: rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.22);
      display:grid;place-items:center;
      box-shadow: 0 10px 18px rgba(0,0,0,.12);
    }
    .social svg *{stroke:#fff !important; fill:#fff !important;}
    .book-plain{display:flex; flex-direction:column; gap:10px;}
    .book-plain img{width: 160px; max-width: 100%; height:auto; object-fit:contain; background: transparent;}
    .pay-plain{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:6px;}
    .pay-plain img{height:22px; width:auto; background:#fff; border-radius:8px; border:1px solid rgba(255,255,255,.12); padding:6px 8px;}
    .footer-bottom{
      border-top: 1px solid rgba(255,255,255,.18);
      padding: 12px 0;
      color: rgba(255,255,255,.85);
      font-size:12px;
    }

    /* ================= VISTA MÃ“VIL ================= */
    @media (max-width: 560px){
      main { padding-bottom: 70px !important; }

      .header-wrap .container{ padding-left: 0; padding-right: 0; }
      .header-bar{
        flex-wrap: nowrap;
        padding: 0px 4px;
        border-radius: var(--radiusHeader);
        gap: 6px;
        margin: 0;
        width: 100%;
        height: 55px;
      }
      .logo{ width: 30px; height: 30px; margin-bottom: 4px; margin-left: 10px;}
      .search{
        flex: 1 1 auto;
        display: flex;
        height: 36px;
        min-width: 0;
        margin: 6px 0;
        padding: 0 10px;
        align-items: center;
      }
      .search input{ font-size: 13px; height: 95%; }
      .cart-pill{
        height: 36px;
        padding: 6px 6px;
        flex-shrink: 0;
        margin-right: 10px;
        gap: 6px;
      }
      .cart-pill .total-badge{ min-width: 70px; padding: 4px 6px; font-size: 11px; }
      .info-block{ display:none !important; }

      .rest-logo{ width:auto; height:auto; padding-right:0; margin-right:0; }
      .rest-logo::after{ display:none; }
      .opt-grid{ grid-template-columns: 1fr; }
      .footer-inner{ grid-template-columns: 1fr; gap:0; }
      .footer-inner > div{ border-bottom: 1px solid rgba(255, 255, 255, 0.18); padding: 10px 0; }
      .footer-inner > div:last-child{ border-bottom: none; }
    }

    /* ===== WhatsApp flotante ===== */
    .wa-float{
      position: fixed;
      right: 16px;
      bottom: 16px;
      width: 50px;
      height: 50px;
      border-radius: 999px;
      display: grid;
      place-items: center;
      background: transparent;
      box-shadow: none;
      z-index: 120;
      overflow: visible;
    }
    .wa-float .wa-icon{
      width: 50px;
      height: 50px;
      object-fit: contain;
      display: block;
      position: relative;
      z-index: 2;
    }
    @media (max-width: 560px){
      .wa-float{
        bottom: calc(16px + 12px + env(safe-area-inset-bottom));
      }
    }
    .wa-float::before,
    .wa-float::after{
      content:"";
      position:absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) scale(.75);
      width: 74px;
      height: 74px;
      border-radius: 999px;
      border: 3px solid rgba(226,31,12,.55);
      opacity: 0;
      pointer-events:none;
      z-index: 1;
      animation: waRipple 1.7s ease-out infinite;
    }
    .wa-float::after{
      width: 92px;
      height: 92px;
      border-color: rgba(226,31,12,.35);
      animation-delay: .55s;
    }
    @keyframes waRipple{
      0%   { opacity: 0; transform: translate(-50%, -50%) scale(.70); }
      15%  { opacity: 1; }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(1.25); }
    }
    @media (prefers-reduced-motion: reduce){
      .wa-float::before,
      .wa-float::after{ animation: none; opacity: 0; }
    }

    /* ===== REST HERO â€“ MOBILE FIX ===== */
    @media (max-width: 560px){
      .rest-hero-inner{
        flex-direction: column;
        align-items: center;
        text-align: center;
        flex-wrap: wrap;
        padding: 12px 16px;
        gap: 6px;
        box-sizing: border-box;
      }
      .rest-logo,
      .rest-copy,
      .rest-meta,
      .rest-hours{
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
        width: 100%;
        max-width: 100%;
      }
      .rest-logo{ margin: 0 auto; }
      .rest-logo img{ width: 195px; height: 150px; }

      .rest-copy{ text-align: center; }
      .rest-copy p{
        text-align: justify;
        font-size: 13.5px;
        line-height: 1.45;
        margin-top: 1px;
      }

      .rest-meta{
        justify-content: center;
        text-align: center;
      }
      .rest-rating{ justify-content: center; }

      .rest-hours{
        margin-top: 6px;
        border-top: 1px solid rgba(107,114,128,.20);
        padding-top: 6px;
      }
      .rest-hours::before{ display:none; }
      .rest-hours-title{ text-align:center; }
      .rest-hours-time{ text-align:center; }
      #restStatus{ margin-left:auto; margin-right:auto; }
    }
  </style>
</head>

<body>

<header>
  <div class="header-wrap">
    <div class="container">
      <div class="header-bar">

        <a class="logo" aria-label="Pacha Eats" href="index.html" title="Volver al inicio">
          <img src="img/logos/Logo1.png" alt="Logo Pacha Eats">
        </a>

        <div class="search" role="search" aria-label="Buscar en Qori Chicken">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.3-4.3m1.3-5.2a7.5 7.5 0 11-15 0 7.5 7.5 0 0115 0z"
              stroke="#e21f0c" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <label class="sr-only" for="q">Buscar</label>
          <input id="q" type="search" placeholder="Buscar en Qori Chicken..." />
        </div>

        <a class="info-block delivery" href="#" aria-label="Comienza tu pedido - Ingresa una ubicaciÃ³n">
          <div class="icon" aria-hidden="true">
            <svg width="36" height="36" viewBox="0 0 24 24" fill="none">
              <path d="M4 14h3l2-4h4l2 3h1.5" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M16 10h2.2l2.3 2.4" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M7 18a2.2 2.2 0 100-4.4A2.2 2.2 0 007 18Z" stroke="white" stroke-width="1.6"/>
              <path d="M18 18a2.2 2.2 0 100-4.4A2.2 2.2 0 0018 18Z" stroke="white" stroke-width="1.6"/>
              <path d="M3 10h4" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M2.5 12h3.5" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="lines">
            <div class="top">Comienza tu pedido</div>
            <div class="bottom">Ingresa una ubicaciÃ³n</div>
          </div>
          <div class="chev" aria-hidden="true">â–¼</div>
        </a>

        <button class="cart-pill" id="openCart" type="button" aria-label="Abrir carrito">
          <span aria-hidden="true" style="display:grid;place-items:center;">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M6 6h15l-2 9H7L6 6Z" stroke="#e21f0c" stroke-width="1.8" stroke-linejoin="round"/>
              <path d="M6 6 5 3H2" stroke="#e21f0c" stroke-width="1.8" stroke-linecap="round"/>
              <circle cx="9" cy="20" r="1.6" fill="#e21f0c"/>
              <circle cx="18" cy="20" r="1.6" fill="#e21f0c"/>
            </svg>
          </span>
          <span class="total-badge" id="cartTotalBadge">S/ 0.00</span>
        </button>

      </div>
    </div>
  </div>
</header>

<main>
  <div class="container">

    <!-- ===== Encabezado restaurante ===== -->
    <section class="rest-hero" aria-label="Qori Chicken">
      <div class="rest-hero-inner">
        <div class="rest-logo" aria-hidden="true">
          <img src="img/logos/restaurantes/Qori Chicken.png" alt="Qori Chicken">
        </div>

        <div class="rest-copy" style="min-width:240px; flex:1;">
          <div class="rest-meta" aria-label="UbicaciÃ³n y reseÃ±as">
            <div class="rest-loc" title="UbicaciÃ³n">
              <span class="ico" aria-hidden="true">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <path d="M12 21s7-4.6 7-11a7 7 0 10-14 0c0 6.4 7 11 7 11Z" stroke="currentColor" stroke-width="1.8" />
                  <path d="M12 10.5a2.3 2.3 0 100-4.6 2.3 2.3 0 000 4.6Z" stroke="currentColor" stroke-width="1.8" />
                </svg>
              </span>
              <span class="txt">Pachacamac</span>
            </div>

            <button class="rest-rating" id="openReviews" type="button" aria-label="Ver opiniones">
              <span class="stars" aria-hidden="true">
                <svg viewBox="0 0 24 24"><path d="M12 17.3 6.2 20.6l1.1-6.5L2.6 9.6l6.6-1L12 2.7l2.8 5.9 6.6 1-4.7 4.5 1.1 6.5z"/></svg>
                <svg viewBox="0 0 24 24"><path d="M12 17.3 6.2 20.6l1.1-6.5L2.6 9.6l6.6-1L12 2.7l2.8 5.9 6.6 1-4.7 4.5 1.1 6.5z"/></svg>
                <svg viewBox="0 0 24 24"><path d="M12 17.3 6.2 20.6l1.1-6.5L2.6 9.6l6.6-1L12 2.7l2.8 5.9 6.6 1-4.7 4.5 1.1 6.5z"/></svg>
                <svg viewBox="0 0 24 24"><path d="M12 17.3 6.2 20.6l1.1-6.5L2.6 9.6l6.6-1L12 2.7l2.8 5.9 6.6 1-4.7 4.5 1.1 6.5z"/></svg>
                <svg viewBox="0 0 24 24"><path d="M12 17.3 6.2 20.6l1.1-6.5L2.6 9.6l6.6-1L12 2.7l2.8 5.9 6.6 1-4.7 4.5 1.1 6.5z"/></svg>
              </span>
              <span class="rating-text"><b>5.0</b> (128 opiniones)</span>
              <span class="chev" aria-hidden="true">â€º</span>
            </button>
          </div>

          <p><b>Pollo a la brasa, broaster y platos criollos</b>: opciones familiares, combos, pastas y bebidas naturales. Personaliza sin saturarte: bebida (selecciÃ³n corta) + extra de papa/arroz.</p>
        </div>

        <div class="rest-hours" aria-label="Horario de atenciÃ³n">
          <div class="rest-status" id="restStatus" aria-live="polite">â€”</div>
          <div class="rest-hours-title">Horario de atenciÃ³n</div>
          <div class="rest-hours-time">De Lunes a Domingo de 12:00 p.m. a 11:00 p.m.</div>
        </div>
      </div>
    </section>

    <!-- ===== Tabs secciones ===== -->
    <section class="tabs" aria-label="Secciones">
      <div class="tabs-inner" id="tabs"></div>
    </section>

    <!-- ===== Productos ===== -->
    <section class="block" id="menuRoot" aria-label="Carta Qori Chicken"></section>

  </div>
</main>

<!-- ================= MODAL PERSONALIZAR ================= -->
<div id="customModal" aria-hidden="true">
  <div class="custom-sheet" role="dialog" aria-label="Personaliza tu producto">
    <div class="custom-head">
      <div>
        <h3 class="custom-title" id="customTitle">Personaliza tu producto</h3>
        <p class="custom-sub" id="customSub">â€”</p>
      </div>
      <button class="xbtn" id="closeCustom" type="button">âœ•</button>
    </div>

    <div class="custom-body">
      <div class="req-note" id="reqNote"></div>

      <div id="customGroups"></div>

      <div class="opt-card custom-footer">
        <div class="row">
          <div>
            <div style="font-size:12px; color:#6b7280;">Total</div>
            <div style="font-weight:950; font-size:18px;" id="customTotal">S/ 0.00</div>
            <div style="font-size:12px; color:#6b7280;" id="customBreakdown"></div>
          </div>
          <div class="qty-box">
            <button class="qty-btn" id="qtyDec" type="button">âˆ’</button>
            <div class="qty-num" id="qtyNum">1</div>
            <button class="qty-btn" id="qtyInc" type="button">+</button>
          </div>
        </div>

        <div style="margin-top:12px; display:flex; justify-content:stretch;">
          <button class="add-btn" id="addFromCustom" type="button">Agregar al carrito</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ================= CARRITO (MODAL) ================= -->
<div id="cartModal" aria-hidden="true">
  <div class="cart-sheet">
    <div style="display:flex; align-items:center; justify-content:space-between; padding:14px; border-bottom:1px solid rgba(0,0,0,.08); background: linear-gradient(180deg, #fff, #fff6ef);">
      <strong>ðŸ›’ Tu carrito</strong>
      <button id="closeCart" type="button"
        style="border:none; background:#f3f4f6; border:1px solid rgba(0,0,0,.10); border-radius:14px; padding:8px 10px; cursor:pointer; font-weight:950;">âœ•</button>
    </div>

    <div id="cartItems" style="padding:14px; display:flex; flex-direction:column; gap:10px; max-height:55vh; overflow:auto;"></div>

    <div style="padding:14px; border-top:1px solid rgba(0,0,0,.08); display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;">
      <strong>Total: <span id="cartTotalText">S/ 0.00</span></strong>
      <div style="display:flex; gap:8px; flex-wrap:wrap;">
        <button id="clearCart" type="button"
          style="border-radius:999px; border:1px solid rgba(0,0,0,.10); background:#fff; padding:10px 12px; font-weight:950; cursor:pointer;">Vaciar</button>
        <button id="checkout" type="button"
          style="border-radius:999px; border:none; background:#111; color:#fff; padding:10px 12px; font-weight:950; cursor:pointer;">Finalizar</button>
      </div>
    </div>
  </div>
</div>

<!-- ================= RESEÃ‘AS (MODAL) ================= -->
<div id="reviewsModal" aria-hidden="true">
  <div class="reviews-sheet" role="dialog" aria-label="Opiniones">
    <div class="reviews-head">
      <div>
        <div style="font-weight:950; font-size:16px;">Opiniones</div>
        <div style="color:#6b7280; font-size:13px;"><span id="reviewsSummary">â€”</span></div>
      </div>
      <button id="closeReviews" type="button" class="xbtn">âœ•</button>
    </div>
    <div class="reviews-body" id="reviewsBody"></div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="footer-inner">

      <div>
        <img class="footer-logo" src="img/logos/Logo2.png" alt="Logo Pacha Eats">
        <div class="f-title">ConÃ©ctate con nosotros</div>

        <div class="contact-lines">
          <div><b>Whatsapp:</b> +51925915905</div>
          <div><b>Correo:</b> contacto@pachaeats.com</div>
        </div>

        <div class="social" aria-label="Redes">
          <a href="#" aria-label="Instagram">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M7 2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5Z" stroke="#fff" stroke-width="1.8"/>
              <path d="M12 17a5 5 0 100-10 5 5 0 000 10Z" stroke="#fff" stroke-width="1.8"/>
              <path d="M17.5 6.5h.01" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
            </svg>
          </a>
          <a href="#" aria-label="Facebook">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M14 8h3V5h-3a4 4 0 00-4 4v3H7v3h3v7h3v-7h3l1-3h-4V9a1 1 0 011-1Z" fill="#fff"/>
            </svg>
          </a>
          <a href="#" aria-label="TikTok">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M14 3v10.2a4.3 4.3 0 11-3.2-4.1V6.7a7.8 7.8 0 003.2 1.2c1.1.2 2.3.1 3.4-.2V4.5c-1.2.4-2.5.4-3.7-.1A4.7 4.7 0 0114 3Z" fill="#fff"/>
            </svg>
          </a>
        </div>
      </div>

      <div>
        <div class="f-title">Sobre Nosotros</div>
        <div class="f-links">
          <a href="#">Trabaja con nosotros</a>
          <a href="#">Horarios, locales y zonas de reparto</a>
          <a href="#">Ventas corporativas</a>
          <a href="#">Comprobantes electrÃ³nicos</a>
        </div>
      </div>

      <div>
        <div class="f-title">PolÃ­ticas &amp; TÃ©rminos</div>
        <div class="f-links">
          <a href="#">TÃ©rminos y condiciones de la web</a>
          <a href="#">PolÃ­ticas de privacidad</a>
          <a href="#">PolÃ­ticas de delivery y pick up</a>
          <a href="#">TÃ©rminos y condiciones de promociones y campaÃ±as</a>
          <a href="#">LÃ­nea Ã‰tica</a>
          <a href="#">PolÃ­tica de cookies</a>
        </div>
      </div>

      <div>
        <div class="f-title">Libro de reclamaciones</div>
        <div class="book-plain">
          <img src="img/logos/Libro.png" alt="Libro de reclamaciones">
        </div>

        <div class="f-title" style="margin-top:14px;">MÃ©todos de Pago</div>
        <div class="pay-plain">
          <img alt="Visa" src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg">
          <img alt="Mastercard" src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg">
          <img alt="Amex" src="https://upload.wikimedia.org/wikipedia/commons/3/30/American_Express_logo.svg">
        </div>
      </div>

    </div>

    <div class="footer-bottom">
      Â© <span id="year"></span> Pacha Eats. Todos los derechos reservados.
    </div>
  </div>
</footer>

<!-- WhatsApp flotante -->
<a
  class="wa-float"
  href="https://wa.me/51925915905?text=Hola%20Pacha%20Eats%2C%20quisiera%20hacer%20un%20pedido%20de%20Qori%20Chicken."
  target="_blank"
  rel="noopener"
  aria-label="Chatear por WhatsApp"
>
  <img class="wa-icon" src="img/logos/LogoWhatsappRojo.png" alt="WhatsApp">
</a>

<script>
  // ================== HELPERS ==================
  const CART_KEY = "pacha_cart_v_qori_1";
  const $ = (s) => document.querySelector(s);
  const $$ = (s) => Array.from(document.querySelectorAll(s));
  const money = (n) => "S/ " + Number(n||0).toFixed(2);
  const escapeHtml = (str) => String(str).replace(/[&<>"']/g, m => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
  }[m]));

  // ================== HORARIO (America/Lima) ==================
  const STORE_SCHEDULE = {
    tz: "America/Lima",
    daily: { open: "12:00", close: "23:00" }
  };

  function nowInTZ(tz){
    const parts = new Intl.DateTimeFormat("en-US", {
      timeZone: tz,
      year:"numeric", month:"2-digit", day:"2-digit",
      hour:"2-digit", minute:"2-digit", second:"2-digit",
      hour12:false
    }).formatToParts(new Date()).reduce((acc,p)=>{acc[p.type]=p.value; return acc;}, {});
    return new Date(`${parts.year}-${parts.month}-${parts.day}T${parts.hour}:${parts.minute}:${parts.second}`);
  }
  function hhmmToMinutes(hhmm){
    const [h,m] = String(hhmm).split(":").map(Number);
    return (h*60) + (m||0);
  }
  function isStoreOpen(){
    const d = nowInTZ(STORE_SCHEDULE.tz);
    const mins = d.getHours()*60 + d.getMinutes();
    const openM = hhmmToMinutes(STORE_SCHEDULE.daily.open);
    const closeM = hhmmToMinutes(STORE_SCHEDULE.daily.close);
    return mins >= openM && mins < closeM;
  }
  function applyStoreStatusUI(){
    const badge = document.getElementById("restStatus");
    if(!badge) return;
    const open = isStoreOpen();
    badge.classList.toggle("open", open);
    badge.classList.toggle("closed", !open);
    badge.textContent = open ? "Abierto" : "Cerrado";
  }

  // ================== OPCIONES (QORI) â€” LIGERAS ==================
  // (No sobrecargamos: solo 2 grupos opcionales reutilizables)
  const OPT = {
    bebidaQori_opcional: {
      id:"bebida_qori",
      title:"Bebida (opcional)",
      type:"radio",
      required:false,
      choices:[
        { id:"none", label:"Sin bebida", add:0 },

        // SelecciÃ³n corta (no todas)
        { id:"chicha1l",   label:"Chicha morada 1L", add:15.00 },
        { id:"limonada1l", label:"Limonada 1L", add:15.00 },
        { id:"maracuya1l", label:"MaracuyÃ¡ 1L", add:15.00 },

        { id:"cocapersonal", label:"Coca/Inka personal", add:4.50 },
        { id:"pepsi15",      label:"Pepsi 1.5L", add:7.00 }
      ],
      defaultId:"none"
    },

    complementoQori_opcional: {
      id:"extra_qori",
      title:"Complemento extra (papas / arroz)",
      type:"radio",
      required:false,
      choices:[
        { id:"none", label:"Sin extra", add:0 },

        // Papas
        { id:"papas_personal", label:"Papas fritas (porciÃ³n personal)", add:7.00 },
        { id:"papas_media",    label:"Papas fritas (1/2 porciÃ³n)", add:12.00 },
        { id:"papas_entera",   label:"Papas fritas (1 porciÃ³n)", add:20.00 },

        // Arroz
        { id:"arroz_blanco",   label:"Arroz blanco", add:5.00 },
        { id:"arroz_chaufa",   label:"Arroz chaufa", add:10.00 },
        { id:"chaufa_personal",label:"Chaufa (porciÃ³n personal)", add:6.00 }
      ],
      defaultId:"none"
    }
  };

  // ================== SECCIONES (TABS) ==================
  const SECTIONS = [
    { id:"ofertas",      name:"Ofertas" },
    { id:"pollo",        name:"Pollo a la brasa" },
    { id:"alitas",       name:"Alitas" },
    { id:"broaster",     name:"Broaster" },
    { id:"hamburguesas", name:"Hamburguesas" },
    { id:"brasas",       name:"Brasas" },
    { id:"criollos",     name:"Criollos" },
    { id:"pastas",       name:"Pastas" },
    { id:"caldos",       name:"Caldos" },
    { id:"carnes",       name:"Carnes" },
    { id:"antojitos",    name:"Antojitos" },
    { id:"kids",         name:"Kids" },
    { id:"bebidas",      name:"Bebidas" },
    { id:"complementos", name:"Complementos" }
  ];

  // ================== MENU (QORI) ==================
  // Nota: PersonalizaciÃ³n ligera para casi todo: Bebida + Complemento.
  const BASE_GROUPS = [ OPT.bebidaQori_opcional, OPT.complementoQori_opcional ];

  const menu = [
    // ===== OFERTAS =====
    { id:"of_1pollo_74", section:"ofertas", name:"1 Pollo (Oferta) + 1.5L", desc:"1 pollo + papas fritas + gaseosa 1.5L + ensalada + cremas.", price:74.00, groups: BASE_GROUPS },
    { id:"of_1pollo14_80", section:"ofertas", name:"1 Pollo + 1/4 (Oferta)", desc:"1 pollo + 1/4 + papas fritas + gaseosa 1.5L + ensalada + cremas.", price:80.00, groups: BASE_GROUPS },
    { id:"of_1pollo_70", section:"ofertas", name:"1 Pollo + 1L (Mesa)", desc:"1 pollo + papas fritas + gaseosa 1L (mesa) + ensalada + cremas.", price:70.00, groups: BASE_GROUPS },
    { id:"of_1pollo12_98", section:"ofertas", name:"1 Pollo + 1/2 (Oferta)", desc:"1 pollo + 1/2 + papas fritas + ensalada + cremas.", price:98.00, groups: BASE_GROUPS },
    { id:"of_2pollos_136", section:"ofertas", name:"2 Pollos (Oferta)", desc:"2 pollos + papas fritas + gaseosa 1.5L + ensalada + cremas.", price:136.00, groups: BASE_GROUPS },
    { id:"of_1pollo_solo_48", section:"ofertas", name:"1 Pollo Solo", desc:"Solo pollo entero.", price:48.00, groups: [OPT.bebidaQori_opcional] },

    // ===== POLLO A LA BRASA =====
    { id:"pollo_1_65", section:"pollo", name:"1 Pollo", desc:"1 pollo + papas fritas + ensalada + cremas.", price:65.00, groups: BASE_GROUPS },
    { id:"pollo_12_38", section:"pollo", name:"1/2 Pollo", desc:"1/2 pollo + papas fritas + ensalada + cremas.", price:38.00, groups: BASE_GROUPS },
    { id:"pollo_14_22", section:"pollo", name:"1/4 Pollo", desc:"1/4 pollo + papas fritas + ensalada + cremas.", price:22.00, groups: BASE_GROUPS },
    { id:"pollo_14_24_vidrio", section:"pollo", name:"1/4 Pollo + Gaseosa vidrio", desc:"1/4 pollo + papas fritas + ensalada + cremas + gaseosa personal vidrio.", price:24.00, groups: [OPT.complementoQori_opcional] },
    { id:"pollo_18_14", section:"pollo", name:"1/8 Pollo", desc:"1/8 pollo + papas fritas + ensalada + cremas.", price:14.00, groups: BASE_GROUPS },
    { id:"pollo_14_solo_16", section:"pollo", name:"1/4 Pollo Solo", desc:"Solo 1/4 de pollo.", price:16.00, groups: [OPT.bebidaQori_opcional] },

    // ===== ALITAS =====
    { id:"al_acevichadas", section:"alitas", name:"Alitas Acevichadas", desc:"Alitas en salsa acevichada.", price:23.00, groups: BASE_GROUPS },
    { id:"al_bbq", section:"alitas", name:"Alitas BBQ", desc:"Alitas en salsa BBQ.", price:20.00, groups: BASE_GROUPS },
    { id:"al_bbq_picante", section:"alitas", name:"Alitas BBQ Picante", desc:"Alitas BBQ con toque picante.", price:20.00, groups: BASE_GROUPS },
    { id:"al_maracuya", section:"alitas", name:"Alitas en salsa de MaracuyÃ¡", desc:"Alitas baÃ±adas en salsa de maracuyÃ¡.", price:20.00, groups: BASE_GROUPS },

    // ===== BROASTER =====
    { id:"br_pecho", section:"broaster", name:"Broaster Pecho", desc:"Pieza broaster: pecho.", price:16.00, groups: BASE_GROUPS },
    { id:"br_pierna", section:"broaster", name:"Broaster Pierna", desc:"Pieza broaster: pierna.", price:15.00, groups: BASE_GROUPS },
    { id:"br_encuentro", section:"broaster", name:"Broaster Encuentro", desc:"Pieza broaster: encuentro.", price:15.00, groups: BASE_GROUPS },
    { id:"br_ala", section:"broaster", name:"Broaster Ala", desc:"Pieza broaster: ala.", price:15.00, groups: BASE_GROUPS },

    { id:"mostri_pecho", section:"broaster", name:"Mostri broaster Pecho", desc:"Mostri broaster (pecho).", price:20.00, groups: BASE_GROUPS },
    { id:"mostri_pierna", section:"broaster", name:"Mostri broaster Pierna", desc:"Mostri broaster (pierna).", price:18.00, groups: BASE_GROUPS },
    { id:"mostri_encuentro", section:"broaster", name:"Mostri broaster Encuentro", desc:"Mostri broaster (encuentro).", price:18.00, groups: BASE_GROUPS },
    { id:"mostri_ala", section:"broaster", name:"Mostri broaster Ala", desc:"Mostri broaster (ala).", price:18.00, groups: BASE_GROUPS },

    // ===== HAMBURGUESAS =====
    { id:"hb_combo_clasica", section:"hamburguesas", name:"Combo ClÃ¡sica", desc:"Hamburguesa clÃ¡sica en combo.", price:11.00, groups: BASE_GROUPS },
    { id:"hb_clasica", section:"hamburguesas", name:"ClÃ¡sica", desc:"Hamburguesa clÃ¡sica.", price:9.00, groups: BASE_GROUPS },
    { id:"hb_royal", section:"hamburguesas", name:"Royal", desc:"Hamburguesa Royal.", price:14.00, groups: BASE_GROUPS },
    { id:"hb_super_royal", section:"hamburguesas", name:"Super Royal", desc:"Hamburguesa Super Royal.", price:17.00, groups: BASE_GROUPS },
    { id:"hb_carritellera", section:"hamburguesas", name:"Carritellera", desc:"Hamburguesa Carritellera.", price:12.00, groups: BASE_GROUPS },
    { id:"hb_parillera", section:"hamburguesas", name:"Parillera", desc:"Hamburguesa Parrillera.", price:14.00, groups: BASE_GROUPS },
    { id:"hb_qori", section:"hamburguesas", name:"Qori", desc:"Hamburguesa Qori.", price:17.00, groups: BASE_GROUPS },
    { id:"hb_pobre", section:"hamburguesas", name:"Pobre", desc:"Hamburguesa a lo pobre.", price:16.00, groups: BASE_GROUPS },
    { id:"hb_pechugona", section:"hamburguesas", name:"La Pechugona", desc:"Hamburguesa de pechuga.", price:16.00, groups: BASE_GROUPS },

    // ===== BRASAS =====
    { id:"br_anticucho", section:"brasas", name:"Anticucho", desc:"Anticucho a la brasa.", price:20.00, groups: BASE_GROUPS },
    { id:"br_mollejita", section:"brasas", name:"Mollejita", desc:"Mollejita a la brasa.", price:18.00, groups: BASE_GROUPS },
    { id:"br_anticucho_mollejita", section:"brasas", name:"Anticucho + Mollejita", desc:"Combo anticucho + mollejita.", price:28.00, groups: BASE_GROUPS },
    { id:"br_panceta_26", section:"brasas", name:"Panceta a la Brasa", desc:"Cortes de panceta con arroz, papas fritas y ensalada.", price:26.00, groups: [OPT.bebidaQori_opcional] },
    { id:"br_brochetas", section:"brasas", name:"Brochetas", desc:"Brochetas a la brasa.", price:20.00, groups: BASE_GROUPS },
    { id:"br_14_anticuchero", section:"brasas", name:"1/4 Anticuchero", desc:"PorciÃ³n anticuchera.", price:32.00, groups: BASE_GROUPS },

    { id:"br_cost_bbq", section:"brasas", name:"Costillitas de cerdo BBQ clÃ¡sica", desc:"Costillitas BBQ + papas fritas + ensalada.", price:28.00, groups: BASE_GROUPS },
    { id:"br_cost_bbq_picante", section:"brasas", name:"Costillitas de cerdo BBQ picante", desc:"Costillitas BBQ picante + papas fritas + ensalada.", price:28.00, groups: BASE_GROUPS },
    { id:"br_cost_maracuya", section:"brasas", name:"Costillitas de cerdo en salsa maracuyÃ¡", desc:"Costillitas en salsa maracuyÃ¡ + papas fritas + ensalada.", price:28.00, groups: BASE_GROUPS },
    { id:"br_panceta_23", section:"brasas", name:"Panceta de cerdo a la brasa", desc:"Cortes de panceta + papas fritas + ensalada.", price:23.00, groups: BASE_GROUPS },

    // ===== CRIOLLOS =====
    { id:"cr_aeropuerto", section:"criollos", name:"Aeropuerto", desc:"Arroz chaufa + tallarÃ­n saltado (estilo aeropuerto).", price:15.00, groups: BASE_GROUPS },
    { id:"cr_aeropuerto_especial", section:"criollos", name:"Aeropuerto especial", desc:"Aeropuerto especial.", price:20.00, groups: BASE_GROUPS },
    { id:"cr_cubana", section:"criollos", name:"Arroz a la cubana", desc:"ClÃ¡sico arroz a la cubana.", price:14.00, groups: BASE_GROUPS },

    { id:"cr_chaufa_pollo", section:"criollos", name:"Chaufa de pollo", desc:"Arroz chaufa de pollo.", price:16.00, groups: BASE_GROUPS },
    { id:"cr_chaufa_pollo_pobre", section:"criollos", name:"Chaufa de pollo a lo pobre", desc:"Chaufa de pollo a lo pobre.", price:18.00, groups: BASE_GROUPS },
    { id:"cr_chaufa_carne", section:"criollos", name:"Chaufa de carne", desc:"Arroz chaufa de carne.", price:18.00, groups: BASE_GROUPS },
    { id:"cr_chaufa_carne_pobre", section:"criollos", name:"Chaufa de carne a lo pobre", desc:"Chaufa de carne a lo pobre.", price:20.00, groups: BASE_GROUPS },

    { id:"cr_lomo", section:"criollos", name:"Lomo Saltado", desc:"Lomo saltado tradicional.", price:20.00, groups: BASE_GROUPS },
    { id:"cr_lomo_pobre", section:"criollos", name:"Lomo Saltado a lo pobre", desc:"Lomo saltado a lo pobre.", price:24.00, groups: BASE_GROUPS },

    { id:"cr_saltado_pollo", section:"criollos", name:"Saltado de Pollo", desc:"Saltado de pollo.", price:18.00, groups: BASE_GROUPS },
    { id:"cr_saltado_pollo_pobre", section:"criollos", name:"Saltado de Pollo a lo pobre", desc:"Saltado de pollo a lo pobre.", price:24.00, groups: BASE_GROUPS },

    { id:"cr_pechuga_plancha", section:"criollos", name:"Pechuga a la plancha", desc:"Pechuga a la plancha.", price:20.00, groups: BASE_GROUPS },
    { id:"cr_pechuga_plancha_pobre", section:"criollos", name:"Pechuga a la plancha a lo pobre", desc:"Pechuga a la plancha a lo pobre.", price:24.00, groups: BASE_GROUPS },

    { id:"cr_chicharron_pollo", section:"criollos", name:"ChicharrÃ³n de pollo", desc:"ChicharrÃ³n de pollo.", price:20.00, groups: BASE_GROUPS },

    { id:"cr_tortilla_pollo", section:"criollos", name:"Tortilla de pollo", desc:"Tortilla de pollo.", price:16.00, groups: BASE_GROUPS },
    { id:"cr_tortilla_verdura", section:"criollos", name:"Tortilla de verdura", desc:"Tortilla de verdura.", price:14.00, groups: BASE_GROUPS },
    { id:"cr_tortilla_pollo_chaufa", section:"criollos", name:"Tortilla de pollo con arroz chaufa", desc:"Tortilla de pollo + arroz chaufa.", price:18.00, groups: [OPT.bebidaQori_opcional] },
    { id:"cr_tortilla_verdura_chaufa", section:"criollos", name:"Tortilla de verdura con arroz chaufa", desc:"Tortilla de verdura + arroz chaufa.", price:16.00, groups: [OPT.bebidaQori_opcional] },

    { id:"cr_milanesa", section:"criollos", name:"Milanesa de pollo", desc:"Milanesa de pollo.", price:18.00, groups: BASE_GROUPS },
    { id:"cr_milanesa_pobre", section:"criollos", name:"Milanesa a lo pobre", desc:"Milanesa a lo pobre.", price:22.00, groups: BASE_GROUPS },

    // ===== PASTAS =====
    { id:"pa_tallarin_carne", section:"pastas", name:"TallarÃ­n Saltado de Carne", desc:"TallarÃ­n saltado con carne.", price:20.00, groups: BASE_GROUPS },
    { id:"pa_tallarin_pollo", section:"pastas", name:"TallarÃ­n Saltado de Pollo", desc:"TallarÃ­n saltado con pollo.", price:18.00, groups: BASE_GROUPS },
    { id:"pa_verdes_pollo_brasa", section:"pastas", name:"Tallarines Verdes con Pollo a la Brasa", desc:"Tallarines verdes + pollo a la brasa.", price:22.00, groups: BASE_GROUPS },
    { id:"pa_verdes_milanesa", section:"pastas", name:"Tallarines Verdes con Milanesa", desc:"Tallarines verdes + milanesa.", price:20.00, groups: BASE_GROUPS },
    { id:"pa_verdes_chuleta", section:"pastas", name:"Tallarines Verdes con Chuleta", desc:"Tallarines verdes + chuleta.", price:20.00, groups: BASE_GROUPS },
    { id:"pa_verdes_panceta", section:"pastas", name:"Tallarines Verdes con Panceta", desc:"Tallarines verdes + panceta.", price:22.00, groups: BASE_GROUPS },
    { id:"pa_verdes_broaster", section:"pastas", name:"Tallarines Verdes con Broaster", desc:"Tallarines verdes + broaster.", price:20.00, groups: BASE_GROUPS },

    { id:"pa_fettuccine_pesto_brasa", section:"pastas", name:"Fettuccine al pesto c/ pollo a la brasa", desc:"Fettuccine al pesto con pollo a la brasa.", price:27.00, groups: BASE_GROUPS },
    { id:"pa_fettuccine_pesto_plancha", section:"pastas", name:"Fettuccine al pesto c/ pechuga a la plancha", desc:"Fettuccine al pesto con pechuga a la plancha.", price:25.00, groups: BASE_GROUPS },
    { id:"pa_fettuccine_pesto_milanesa", section:"pastas", name:"Fettuccine al pesto c/ milanesa", desc:"Fettuccine al pesto con milanesa.", price:25.00, groups: BASE_GROUPS },

    { id:"pa_fansi_carne", section:"pastas", name:"Fansi saltado de carne", desc:"Fideos chinos libres de gluten con carne flameada, tomate y cebolla.", price:27.00, groups: BASE_GROUPS },
    { id:"pa_fansi_pollo", section:"pastas", name:"Fansi saltado de pollo", desc:"Fideos chinos libres de gluten con pollo, cebolla y tomate.", price:27.00, groups: BASE_GROUPS },

    { id:"pa_huancaina_lomo", section:"pastas", name:"Tallarines a la huancaÃ­na c/ lomo saltado", desc:"Pasta delgada en salsa huancaÃ­na con lomo saltado.", price:30.00, groups: BASE_GROUPS },

    // ===== CALDOS =====
    { id:"ca_caldo_presa", section:"caldos", name:"Caldo de Gallina con Presa", desc:"Caldo de gallina con presa.", price:15.00, groups: [OPT.bebidaQori_opcional] },
    { id:"ca_caldo_sin", section:"caldos", name:"Caldo de Gallina sin Presa", desc:"Caldo de gallina sin presa.", price:11.00, groups: [OPT.bebidaQori_opcional] },
    { id:"ca_caldo_2h", section:"caldos", name:"Caldo de Gallina con 2 Huevos", desc:"Caldo de gallina con 2 huevos.", price:12.00, groups: [OPT.bebidaQori_opcional] },
    { id:"ca_caldo_acevichado", section:"caldos", name:"Caldo de Gallina Acevichada", desc:"Caldo de gallina acevichada.", price:17.00, groups: [OPT.bebidaQori_opcional] },
    { id:"ca_dieta", section:"caldos", name:"Sopa de Dieta", desc:"Sopa de dieta.", price:15.00, groups: [OPT.bebidaQori_opcional] },
    { id:"ca_minuta", section:"caldos", name:"Sopa a la Minuta", desc:"Sopa a la minuta.", price:16.00, groups: [OPT.bebidaQori_opcional] },
    { id:"ca_criolla", section:"caldos", name:"Sopa criolla", desc:"Sopa criolla con carne y papa amarilla, entre otros.", price:16.00, groups: [OPT.bebidaQori_opcional] },

    // ===== CARNES =====
    { id:"cn_bistec", section:"carnes", name:"Bistec", desc:"Bistec.", price:20.00, groups: BASE_GROUPS },
    { id:"cn_bistec_pobre", section:"carnes", name:"Bistec a lo pobre", desc:"Bistec a lo pobre.", price:25.00, groups: BASE_GROUPS },
    { id:"cn_chuleta", section:"carnes", name:"Chuleta", desc:"Chuleta.", price:18.00, groups: BASE_GROUPS },
    { id:"cn_chuleta_pobre", section:"carnes", name:"Chuleta a lo pobre", desc:"Chuleta a lo pobre.", price:22.00, groups: BASE_GROUPS },
    { id:"cn_churrasco", section:"carnes", name:"Churrasco", desc:"Churrasco.", price:20.00, groups: BASE_GROUPS },
    { id:"cn_churrasco_pobre", section:"carnes", name:"Churrasco a lo pobre", desc:"Churrasco a lo pobre.", price:25.00, groups: BASE_GROUPS },

    // ===== ANTOJITOS =====
    { id:"an_salchi_clasica", section:"antojitos", name:"Salchipapa clÃ¡sica", desc:"Salchicha + abundantes papas fritas.", price:8.00, groups: [OPT.bebidaQori_opcional] },
    { id:"an_salchi_clasica_pobre", section:"antojitos", name:"Salchipapa clÃ¡sica a lo pobre", desc:"Salchicha + papas + huevo + plÃ¡tano frito.", price:12.00, groups: [OPT.bebidaQori_opcional] },
    { id:"an_salchi_especial", section:"antojitos", name:"Salchipapa especial", desc:"Salchicha ahumada + abundantes papas.", price:12.00, groups: [OPT.bebidaQori_opcional] },
    { id:"an_salchi_mix", section:"antojitos", name:"Salchipapa mix", desc:"Salchicha clÃ¡sica + ahumada con abundantes papas.", price:15.00, groups: [OPT.bebidaQori_opcional] },
    { id:"an_salchi_especial_mix", section:"antojitos", name:"Salchipapa especial mix", desc:"ClÃ¡sicas + ahumada + chorizo con abundantes papas.", price:18.00, groups: [OPT.bebidaQori_opcional] },
    { id:"an_choripapas", section:"antojitos", name:"Choripapas", desc:"Chorizo con abundantes papas.", price:10.00, groups: [OPT.bebidaQori_opcional] },
    { id:"an_choripapas_pobre", section:"antojitos", name:"Choripapas a lo pobre", desc:"Chorizo + papas + huevo + plÃ¡tano frito.", price:14.00, groups: [OPT.bebidaQori_opcional] },
    { id:"an_nuggets", section:"antojitos", name:"Nuggets", desc:"Nuggets con abundantes papas.", price:16.00, groups: [OPT.bebidaQori_opcional] },

    { id:"an_salchi_qori", section:"antojitos", name:"Salchi Qori", desc:"1/4 pollo + papas fritas + salchicha.", price:22.00, groups: [OPT.bebidaQori_opcional] },
    { id:"an_salchi_qori_pobre", section:"antojitos", name:"Salchi Qori a lo pobre", desc:"1/4 pollo + papas + salchicha + plÃ¡tano + huevo.", price:25.00, groups: [OPT.bebidaQori_opcional] },
    { id:"an_salchi_nuggets", section:"antojitos", name:"Salchi Nuggets", desc:"Nuggets + salchicha + papas fritas.", price:20.00, groups: [OPT.bebidaQori_opcional] },
    { id:"an_salchi_nuggets_pobre", section:"antojitos", name:"Salchi Nuggets a lo pobre", desc:"Nuggets + salchicha + papas + plÃ¡tano + huevo.", price:24.00, groups: [OPT.bebidaQori_opcional] },

    { id:"an_choripan", section:"antojitos", name:"ChoripÃ¡n", desc:"ChoripÃ¡n.", price:8.00, groups: [OPT.bebidaQori_opcional] },

    // ===== KIDS =====
    { id:"k_huevo", section:"kids", name:"Combo Huevo", desc:"1/8 pollo + huevo frito + papas + frugos.", price:20.00, groups: [OPT.complementoQori_opcional] },
    { id:"k_junior", section:"kids", name:"Combo Junior", desc:"1/8 pollo + huevo + salchicha + frugos.", price:22.00, groups: [OPT.complementoQori_opcional] },
    { id:"k_super_junior", section:"kids", name:"Combo Super Junior", desc:"1/8 pollo + huevo + plÃ¡tano + salchicha + frugos.", price:25.00, groups: [OPT.complementoQori_opcional] },
    { id:"k_nuggets", section:"kids", name:"Combo Nuggets (Kids)", desc:"Nuggets + papas + huevo frito + frugos.", price:20.00, groups: [OPT.complementoQori_opcional] },

    // ===== BEBIDAS (como productos) =====
    { id:"b_chicha_1l", section:"bebidas", name:"Chicha morada 1L", desc:"Bebida natural.", price:15.00, groups: [] },
    { id:"b_chicha_12", section:"bebidas", name:"Chicha morada 1/2L", desc:"Bebida natural.", price:8.50, groups: [] },
    { id:"b_limonada_1l", section:"bebidas", name:"Limonada 1L", desc:"Bebida natural.", price:15.00, groups: [] },
    { id:"b_limonada_12", section:"bebidas", name:"Limonada 1/2L", desc:"Bebida natural.", price:8.50, groups: [] },
    { id:"b_maracuya_1l", section:"bebidas", name:"MaracuyÃ¡ 1L", desc:"Bebida natural.", price:15.00, groups: [] },
    { id:"b_maracuya_12", section:"bebidas", name:"MaracuyÃ¡ 1/2L", desc:"Bebida natural.", price:8.50, groups: [] },
    { id:"b_coca_inka_15", section:"bebidas", name:"Inka/Coca 1.5L", desc:"Gaseosa 1.5L.", price:10.00, groups: [] },
    { id:"b_coca_inka_1l", section:"bebidas", name:"Coca/Inka 1L", desc:"Gaseosa 1L.", price:8.50, groups: [] },
    { id:"b_pepsi_15", section:"bebidas", name:"Pepsi 1.5L", desc:"Gaseosa 1.5L.", price:7.00, groups: [] },
    { id:"b_pepsi_personal", section:"bebidas", name:"Pepsi personal", desc:"Gaseosa personal.", price:3.50, groups: [] },

    // ===== COMPLEMENTOS =====
    { id:"c_arroz_chaufa", section:"complementos", name:"Arroz chaufa", desc:"PorciÃ³n de arroz chaufa.", price:10.00, groups: [] },
    { id:"c_arroz_blanco", section:"complementos", name:"Arroz blanco", desc:"PorciÃ³n de arroz blanco.", price:5.00, groups: [] },
    { id:"c_platano", section:"complementos", name:"PlÃ¡tano frito", desc:"PorciÃ³n de plÃ¡tano frito.", price:3.50, groups: [] },
    { id:"c_huevo", section:"complementos", name:"Huevo frito", desc:"Huevo frito.", price:2.00, groups: [] },
    { id:"c_salchicha", section:"complementos", name:"Salchicha", desc:"PorciÃ³n de salchicha.", price:4.00, groups: [] },
    { id:"c_chorizo", section:"complementos", name:"Chorizo", desc:"PorciÃ³n de chorizo.", price:5.00, groups: [] },
    { id:"c_papas_1", section:"complementos", name:"Papas fritas (1 porciÃ³n)", desc:"PorciÃ³n de papas fritas.", price:20.00, groups: [] },
    { id:"c_papas_12", section:"complementos", name:"Papas fritas (1/2 porciÃ³n)", desc:"Media porciÃ³n de papas fritas.", price:12.00, groups: [] },
    { id:"c_papas_personal", section:"complementos", name:"Papas fritas (porciÃ³n personal)", desc:"PorciÃ³n personal de papas fritas.", price:7.00, groups: [] },
    { id:"c_ensalada_1", section:"complementos", name:"Ensalada (1 porciÃ³n)", desc:"PorciÃ³n de ensalada.", price:10.00, groups: [] },
    { id:"c_ensalada_12", section:"complementos", name:"Ensalada (1/2 porciÃ³n)", desc:"Media porciÃ³n de ensalada.", price:6.00, groups: [] },
    { id:"c_ensalada_personal", section:"complementos", name:"Ensalada personal", desc:"PorciÃ³n personal de ensalada.", price:4.00, groups: [] },
    { id:"c_chaufa_personal", section:"complementos", name:"Chaufa (porciÃ³n personal)", desc:"PorciÃ³n personal de arroz chaufa.", price:6.00, groups: [] }
  ];

  // ================== CART ==================
  let cart = loadCart();
  function loadCart(){
    try{ const raw = localStorage.getItem(CART_KEY); return raw ? JSON.parse(raw) : {}; }
    catch(e){ return {}; }
  }
  function saveCart(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }
  function cartTotal(){ return Object.values(cart).reduce((acc, it) => acc + it.price*it.qty, 0); }
  function addToCartLine({ key, name, price, qty }){
    if(!cart[key]) cart[key] = { id:key, name, price, qty:0 };
    cart[key].qty += qty;
    saveCart();
    renderCartBadge();
  }
  function changeQty(key, delta){
    if(!cart[key]) return;
    cart[key].qty += delta;
    if(cart[key].qty <= 0) delete cart[key];
    saveCart();
    renderCartBadge();
    renderCartModal();
  }
  function clearCart(){ cart = {}; saveCart(); renderCartBadge(); renderCartModal(); }
  function renderCartBadge(){
    $("#cartTotalBadge").textContent = money(cartTotal());
    $("#cartTotalText").textContent = money(cartTotal());
  }

  // ================== UI: TABS + MENU RENDER ==================
  let activeSection = "all";

  function productCardHTML(p){
    const imgPath = `img/productos/qori/${p.name}.jpg`;
    const groupsCount = (p.groups || []).length;

    return `
      <article class="p-card product-card">
        <div class="p-imgbox">
          <img
            src="${imgPath}"
            alt="${escapeHtml(p.name)}"
            onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=ph>Qori Chicken</div>'"
          >
        </div>

        <p class="p-name">${escapeHtml(p.name)}</p>
        <p class="p-desc">${escapeHtml(p.desc || "")}</p>
        <div class="p-price">${money(p.price)}</div>

        <div class="p-actions">
          <button class="p-add" type="button" data-open-custom="${p.id}">
            ${groupsCount ? "Agregar" : "Agregar"}
          </button>
        </div>
      </article>
    `;
  }

  function buildTabs(){
    const root = $("#tabs");
    root.innerHTML = "";

    const allBtn = document.createElement("button");
    allBtn.className = "tab" + (activeSection === "all" ? " active" : "");
    allBtn.type = "button";
    allBtn.textContent = "Todos";
    allBtn.addEventListener("click", () => {
      activeSection = "all";
      buildTabs();
      renderMenu();
      const menuRoot = $("#menuRoot");
      window.scrollTo({ top: menuRoot.getBoundingClientRect().top + window.scrollY - 120, behavior:"smooth" });
    });
    root.appendChild(allBtn);

    SECTIONS.forEach(s => {
      const b = document.createElement("button");
      b.className = "tab" + (s.id === activeSection ? " active" : "");
      b.type = "button";
      b.textContent = s.name;
      b.addEventListener("click", () => {
        activeSection = s.id;
        buildTabs();
        renderMenu();
        const menuRoot = $("#menuRoot");
        window.scrollTo({ top: menuRoot.getBoundingClientRect().top + window.scrollY - 120, behavior:"smooth" });
      });
      root.appendChild(b);
    });
  }

  function renderMenu(){
    const root = $("#menuRoot");
    const q = ($("#q").value || "").trim().toLowerCase();

    if (activeSection !== "all" && !SECTIONS.some(s => s.id === activeSection)) {
      activeSection = "all";
    }

    const secName =
      activeSection === "all"
        ? "Todos los productos"
        : (SECTIONS.find(s => s.id === activeSection)?.name || "Carta");

    let list = Array.isArray(menu) ? menu.slice() : [];

    if (activeSection !== "all") {
      list = list.filter(p => p.section === activeSection);
    }

    if (q) {
      list = list.filter(p => (p.name + " " + (p.desc || "")).toLowerCase().includes(q));
    }

    root.innerHTML = `
      <div class="block-title">
        <h3>${escapeHtml(secName)}</h3>
        <small>${list.length} item(s)</small>
      </div>
      <div class="grid">
        ${
          list.length
            ? list.map(productCardHTML).join("")
            : `<div style="grid-column:1/-1; background:rgba(255,255,255,.88); border:1px dashed rgba(0,0,0,.15); border-radius:18px; padding:14px; color:#6b7280;">
                No se encontraron productos con ese nombre.
              </div>`
        }
      </div>
    `;

    root.querySelectorAll("[data-open-custom]").forEach(btn => {
      btn.addEventListener("click", () => {
        const id = btn.getAttribute("data-open-custom");
        const p = menu.find(x => x.id === id);
        if(!p) return;
        openCustomize(p);
      });
    });
  }

  $("#q").addEventListener("input", renderMenu);

  // ================== RESEÃ‘AS (demo) ==================
  const REVIEWS = [
    { name:"MarÃ­a P.",  rating:5, date:"Hace 2 dÃ­as", text:"El pollo estuvo jugoso y las papas bien crocantes. Buenazo." },
    { name:"Carlos R.", rating:5, date:"Hace 1 semana", text:"Buen tamaÃ±o y buena sazÃ³n. Recomendado." },
    { name:"Andrea V.", rating:5, date:"Hace 2 semanas", text:"La limonada y el chaufa, top. LlegÃ³ rÃ¡pido." },
    { name:"Luis G.",   rating:5, date:"Hace 1 mes", text:"Buen servicio y precios justos." }
  ];

  function starsHTML(n){
    const s = [];
    for(let i=0;i<5;i++){
      s.push(`<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 17.3 6.2 20.6l1.1-6.5L2.6 9.6l6.6-1L12 2.7l2.8 5.9 6.6 1-4.7 4.5 1.1 6.5z"/></svg>`);
    }
    return `<span class="rev-stars">${s.join("")}</span>`;
  }

  function openReviews(){
    const modal = document.getElementById("reviewsModal");
    if(!modal) return;

    const avg = 5.0;
    document.getElementById("reviewsSummary").textContent = `${avg.toFixed(1)} â€¢ ${REVIEWS.length} opiniones destacadas`;

    const body = document.getElementById("reviewsBody");
    body.innerHTML = REVIEWS.map(r => `
      <div class="rev-card">
        <div class="rev-top">
          <div>
            <div class="rev-name">${escapeHtml(r.name)}</div>
            <div>${starsHTML(r.rating)}</div>
          </div>
          <div class="rev-date">${escapeHtml(r.date)}</div>
        </div>
        <div class="rev-text">${escapeHtml(r.text)}</div>
      </div>
    `).join("");

    modal.classList.add("show");
    modal.setAttribute("aria-hidden","false");
  }

  function closeReviews(){
    const modal = document.getElementById("reviewsModal");
    if(!modal) return;
    modal.classList.remove("show");
    modal.setAttribute("aria-hidden","true");
  }

  // INIT
  buildTabs();
  renderMenu();
  renderCartBadge();
  $("#year").textContent = String(new Date().getFullYear());

  // Estado abierto/cerrado
  applyStoreStatusUI();
  setInterval(applyStoreStatusUI, 60 * 1000);

  // ===== Header auto-hide (muestra al subir) =====
  (function(){
    const header = document.querySelector("header");
    if(!header) return;

    let lastY = window.scrollY;
    let ticking = false;

    function update(){
      const y = window.scrollY;
      const delta = Math.abs(y - lastY);
      if(delta < 8) return;

      const goingDown = y > lastY;
      if(goingDown && y > 120){
        header.classList.add("is-hidden");
      }else{
        header.classList.remove("is-hidden");
      }
      lastY = y;
    }

    window.addEventListener("scroll", () => {
      if(!ticking){
        requestAnimationFrame(() => {
          update();
          ticking = false;
        });
        ticking = true;
      }
    }, { passive:true });
  })();

  // ================== MODAL PERSONALIZAR (DINÃMICO) ==================
  let customProduct = null;
  let customQty = 1;
  let selections = {}; // groupId -> radioId or array

  function openCustomize(p){
    // Si no tiene grupos, lo agregamos directo (sin modal) para que sea aÃºn mÃ¡s limpio
    if(!(p.groups && p.groups.length)){
      addToCartLine({ key: p.id, name: p.name, price: p.price, qty: 1 });
      return;
    }

    customProduct = p;
    customQty = 1;
    selections = {};

    $("#customTitle").textContent = p.name;
    $("#customSub").textContent = "Personaliza (ligero) â€¢ Base: " + money(p.price);
    $("#qtyNum").textContent = "1";

    (p.groups || []).forEach(g => {
      if(g.type === "radio"){
        selections[g.id] = (g.defaultId ?? (g.choices?.[0]?.id));
      } else if(g.type === "check"){
        selections[g.id] = Array.isArray(g.defaultIds) ? [...g.defaultIds] : [];
      }
    });

    renderCustomGroups();
    updateCustomTotal();

    const cm = $("#customModal");
    cm.classList.add("show");
    cm.setAttribute("aria-hidden","false");
  }

  function closeCustomize(){
    const cm = $("#customModal");
    cm.classList.remove("show");
    cm.setAttribute("aria-hidden","true");
    customProduct = null;
    selections = {};
  }

  $("#closeCustom").addEventListener("click", closeCustomize);
  $("#customModal").addEventListener("click", (e) => { if(e.target.id === "customModal") closeCustomize(); });

  function renderCustomGroups(){
    const root = $("#customGroups");
    root.innerHTML = "";

    const reqCount = (customProduct.groups || []).filter(g => g.required).length;
    $("#reqNote").textContent = reqCount ? `Campos obligatorios: ${reqCount}` : "Opcional: agrega bebida o extra de papa/arroz.";

    (customProduct.groups || []).forEach(g => {
      const card = document.createElement("div");
      card.className = "opt-card";

      // Menos â€œruidoâ€: solo marcamos â€œObligatorioâ€ cuando aplica
      const badge = g.required ? " <span style='color:#111; font-weight:950;'>(Obligatorio)</span>" : "";
      card.innerHTML = `
        <h4>${escapeHtml(g.title)}${badge}</h4>
        <div class="opt-grid" data-group="${escapeHtml(g.id)}"></div>
      `;
      root.appendChild(card);

      const grid = card.querySelector(".opt-grid");
      if(g.type === "radio"){
        g.choices.forEach(ch => {
          const id = `g_${g.id}_${ch.id}`;
          const checked = selections[g.id] === ch.id;
          const el = document.createElement("label");
          el.className = "opt" + (checked ? " is-checked" : "");
          el.innerHTML = `
            <input type="radio" name="${escapeHtml(g.id)}" id="${escapeHtml(id)}" ${checked ? "checked" : ""}>
            <div>
              <div style="font-weight:950;">${escapeHtml(ch.label)}</div>
              <small>${ch.add ? ("+"+money(ch.add)) : "+S/ 0.00"}</small>
            </div>
          `;
          el.addEventListener("click", () => {
            selections[g.id] = ch.id;
            renderCustomGroups();
            updateCustomTotal();
          });
          grid.appendChild(el);
        });
      } else if(g.type === "check"){
        g.choices.forEach(ch => {
          const checked = (selections[g.id] || []).includes(ch.id);
          const el = document.createElement("label");
          el.className = "opt" + (checked ? " is-checked" : "");
          el.innerHTML = `
            <input type="checkbox" ${checked ? "checked" : ""}>
            <div>
              <div style="font-weight:950;">${escapeHtml(ch.label)}</div>
              <small>${ch.add ? ("+"+money(ch.add)) : "+S/ 0.00"}</small>
            </div>
          `;
          el.addEventListener("click", () => {
            const arr = new Set(selections[g.id] || []);
            if(arr.has(ch.id)) arr.delete(ch.id); else arr.add(ch.id);
            selections[g.id] = [...arr];
            renderCustomGroups();
            updateCustomTotal();
          });
          grid.appendChild(el);
        });
      }
    });
  }

  $("#qtyDec").addEventListener("click", () => {
    customQty = Math.max(1, customQty - 1);
    $("#qtyNum").textContent = String(customQty);
    updateCustomTotal();
  });
  $("#qtyInc").addEventListener("click", () => {
    customQty = Math.min(99, customQty + 1);
    $("#qtyNum").textContent = String(customQty);
    updateCustomTotal();
  });

  function getChoiceById(group, choiceId){
    return (group.choices || []).find(c => c.id === choiceId) || null;
  }

  function calcUnitPrice(){
    let unit = customProduct.price;
    let breakdown = [];

    (customProduct.groups || []).forEach(g => {
      if(g.type === "radio"){
        const pick = selections[g.id];
        if(g.required && !pick){
          selections[g.id] = g.defaultId ?? g.choices?.[0]?.id;
        }
        const ch = getChoiceById(g, selections[g.id]);
        if(ch){
          unit += Number(ch.add || 0);
          if(ch.id !== "none") breakdown.push(`${g.title}: ${ch.label}${ch.add ? " ("+money(ch.add)+")" : ""}`);
        }
      } else if(g.type === "check"){
        const picks = selections[g.id] || [];
        picks.forEach(pid => {
          const ch = getChoiceById(g, pid);
          if(ch){
            unit += Number(ch.add || 0);
            breakdown.push(`${g.title}: ${ch.label}${ch.add ? " ("+money(ch.add)+")" : ""}`);
          }
        });
      }
    });

    return { unit, breakdown };
  }

  function updateCustomTotal(){
    if(!customProduct) return;
    const { unit, breakdown } = calcUnitPrice();
    const total = unit * customQty;
    $("#customTotal").textContent = money(total);
    $("#customBreakdown").textContent = breakdown.slice(0, 2).join(" â€¢ ") + (breakdown.length > 2 ? " â€¢ ..." : "");
  }

  $("#addFromCustom").addEventListener("click", () => {
    if(!customProduct) return;

    const missing = (customProduct.groups || []).filter(g => g.required).some(g => {
      if(g.type === "radio") return !selections[g.id];
      if(g.type === "check") return false;
      return false;
    });
    if(missing){
      alert("Completa las opciones obligatorias.");
      return;
    }

    const { unit } = calcUnitPrice();

    const pretty = [];
    (customProduct.groups || []).forEach(g => {
      if(g.type === "radio"){
        const ch = getChoiceById(g, selections[g.id]);
        if(ch && ch.id !== "none") pretty.push(`${ch.label}`);
      } else if(g.type === "check"){
        const picks = selections[g.id] || [];
        const names = picks.map(pid => getChoiceById(g,pid)?.label).filter(Boolean);
        if(names.length) pretty.push(`${names.join(", ")}`);
      }
    });

    const lineName = `${customProduct.name}` + (pretty.length ? ` â€¢ ${pretty.join(" | ")}` : "");
    const key = customProduct.id + "|" + JSON.stringify(selections);

    addToCartLine({ key, name: lineName, price: unit, qty: customQty });
    closeCustomize();
  });

  // ================== CARRITO MODAL ==================
  function openCart(){
    renderCartModal();
    $("#cartModal").style.display="block";
    $("#cartModal").setAttribute("aria-hidden","false");
  }
  function closeCart(){
    $("#cartModal").style.display="none";
    $("#cartModal").setAttribute("aria-hidden","true");
  }
  $("#openCart").addEventListener("click", openCart);

  // ReseÃ±as
  $("#openReviews").addEventListener("click", openReviews);
  $("#closeReviews").addEventListener("click", closeReviews);
  $("#reviewsModal").addEventListener("click", (e)=>{ if(e.target.id==="reviewsModal") closeReviews(); });

  $("#closeCart").addEventListener("click", closeCart);
  $("#cartModal").addEventListener("click", (e)=>{ if(e.target.id==="cartModal") closeCart(); });

  $("#clearCart").addEventListener("click", ()=>{ if(confirm("Â¿Vaciar carrito?")) clearCart(); });

  $("#checkout").addEventListener("click", ()=>{
    const total = cartTotal();
    if(total<=0){ alert("Tu carrito estÃ¡ vacÃ­o."); return; }
    const items = Object.values(cart).map(i => `â€¢ ${i.qty} x ${i.name} (${money(i.price)})`).join("\n");
    alert(`Pedido (demo)\n\n${items}\n\nTotal: ${money(total)}`);
  });

  function renderCartModal(){
    const root = $("#cartItems");
    root.innerHTML = "";
    const items = Object.values(cart);

    if(items.length === 0){
      root.innerHTML = `<div style="border:1px dashed rgba(0,0,0,.12); border-radius:18px; padding:12px; color:#6b7280; background:#fafafa;">
        Tu carrito estÃ¡ vacÃ­o. Agrega productos con el botÃ³n "Agregar".
      </div>`;
      $("#cartTotalText").textContent = money(0);
      return;
    }

    items.forEach(it => {
      const row = document.createElement("div");
      row.style.cssText = "border:1px solid rgba(0,0,0,.10); border-radius:18px; padding:12px; display:flex; justify-content:space-between; gap:10px; align-items:flex-start; box-shadow: 0 10px 18px rgba(17,24,39,.06); background:#fff;";
      row.innerHTML = `
        <div style="min-width:0;">
          <div style="font-weight:950; font-size:14px; margin-bottom:6px;">${escapeHtml(it.name)}</div>
          <div style="color:#6b7280; font-size:13px;">${money(it.price)} c/u</div>
          <div style="color:#6b7280; font-size:13px;"><strong>Subtotal:</strong> ${money(it.price * it.qty)}</div>
        </div>
        <div style="display:flex; align-items:center; gap:8px;">
          <button type="button" data-act="dec" data-id="${escapeHtml(it.id)}" style="width:36px;height:36px;border-radius:14px;border:1px solid rgba(0,0,0,.10);background:#f3f4f6;font-weight:950;cursor:pointer;">âˆ’</button>
          <strong style="min-width:18px; text-align:center;">${it.qty}</strong>
          <button type="button" data-act="inc" data-id="${escapeHtml(it.id)}" style="width:36px;height:36px;border-radius:14px;border:1px solid rgba(0,0,0,.10);background:#f3f4f6;font-weight:950;cursor:pointer;">+</button>
        </div>
      `;
      root.appendChild(row);
    });

    $$("#cartItems [data-act]").forEach(btn => {
      btn.addEventListener("click", () => {
        const id = btn.dataset.id;
        const act = btn.dataset.act;
        changeQty(id, act === "inc" ? 1 : -1);
      });
    });

    $("#cartTotalText").textContent = money(cartTotal());
  }
</script>

</body>
</html>
