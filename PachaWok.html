
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pacha Wok â€¢ Pacha Eats</title>

  <style>
    :root{
      --text:#111827;
      --muted:#6b7280;

      --brand:#e21f0c;      /* header/footer */
      --bg:#f5ebdc;         /* fondo */
      --heroArrow:#d62300;  /* botones */
      --shadow: 0 14px 30px rgba(17,24,39,.10);
      --shadow2: 0 10px 22px rgba(17,24,39,.09);
      --shadow3: 0 18px 40px rgba(17,24,39,.14);

      --radiusHeader: 48px;
      --radiusPill: 999px;
      --radiusCard: 18px;

      --max: 1180px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    button,input,select{font:inherit}
    .container{max-width:var(--max); margin:0 auto; padding:0 14px;}
    .sr-only{
      position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
    }

    /* ================= HEADER ================= */
    header{
      position:sticky;
      top:0;
      z-index:60;
      background: rgba(245,235,220,.88);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(0,0,0,.06);
    }

    /* ===== Header auto-hide on scroll (muestra al subir) ===== */
    header{
      transition: transform .22s ease;
      will-change: transform;
    }
    header.is-hidden{
      transform: translateY(-110%);
    }
    .header-wrap{padding:4px 0 4px;}
    .header-bar{
      background: var(--brand);
      border-radius: var(--radiusHeader);
      box-shadow: var(--shadow3);
      padding:4px 4px;
      display:flex;
      align-items:center;
      gap:10px;
      overflow:hidden;
      position:relative;
    }
    .header-bar::after{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(120px 120px at 14% 0%, rgba(255,255,255,.16), transparent 60%),
        radial-gradient(160px 160px at 82% 20%, rgba(255,255,255,.12), transparent 60%),
        radial-gradient(220px 220px at 50% 120%, rgba(0,0,0,.14), transparent 60%);
      pointer-events:none;
      mix-blend-mode: screen;
    }

    .logo{
      width:36px; height:36px;
      border-radius:0;
      display:grid; place-items:center;
      overflow:visible;
      flex:0 0 auto;
      background: transparent;
      border:none;
      box-shadow:none;
      z-index:1;
      margin-bottom: 7px;
      margin-left: 14px;
      margin-top: 1px;
      margin-right: 0px;
    }
    .logo img{width:100%; height:100%; object-fit:contain; padding:0;}

    .search{
      display:flex;
      align-items:center;
      gap:10px;
      background:#fff;
      border-radius: var(--radiusPill);
      padding:11px 12px;
      flex: 1 1 360px;
      min-width: 200px;
      box-shadow: var(--shadow2);
      z-index:1;
      border:1px solid rgba(229,231,235,.85);
    }
    .search input{
      border:none;
      outline:none;
      width:100%;
      min-width:0;
      font-size:14px;
    }
    .search input::placeholder{color:#9ca3af}

    .info-block{
      color:#fff;
      display:flex;
      align-items:center;
      gap:10px;
      padding:8px 10px;
      border-radius:16px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.18);
      white-space:nowrap;
      flex:0 0 auto;
      z-index:1;
    }
    .info-block .icon{width:28px; height:28px; display:grid; place-items:center; flex:0 0 auto;}
    .info-block.delivery .icon{ width:36px; height:36px; }
    .info-block .lines{display:flex; flex-direction:column; line-height:1.08; gap:2px;}
    .info-block .top{font-weight:950; font-size:13px;}
    .info-block .bottom{font-weight:750; font-size:12px; opacity:.95;}
    .info-block .chev{margin-left:2px; font-weight:900; width:16px; display:grid; place-items:center;}

    .cart-pill{
      display:flex;
      align-items:center;
      gap:10px;
      background:#fff;
      border-radius: var(--radiusPill);
      padding:10px 10px;
      box-shadow: var(--shadow2);
      flex:0 0 auto;
      cursor:pointer;
      border:1px solid rgba(229,231,235,.85);
      z-index:1;
    }
    .cart-pill .total-badge{
      background: var(--brand);
      color:#fff;
      border-radius: 999px;
      padding:7px 10px;
      font-weight:900;
      font-size:12px;
      line-height:1;
      min-width:92px;
      text-align:center;
      box-shadow: 0 12px 22px rgba(226,31,12,.24);
    }

    /* Hover micro */
    button, .btn, a.btn, .product-card, .info-block, .cart-pill {
      transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
    }
    button:hover, .btn:hover, a.btn:hover, .product-card:hover, .info-block:hover, .cart-pill:hover {
      transform: scale(1.03);
    }

    main{padding: 12px 0 44px;}

    .section-head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      margin: 16px 0 12px;
    }
    .section-head h2{margin:0; font-size: clamp(18px, 2.2vw, 26px); font-weight:950;}
    .section-head p{margin:0; color:#374151; font-size:14px; max-width:70ch;}

    /* ===== Restaurant hero ===== */
    .rest-hero{
      background: rgba(255,255,255,.88);
      border:1px solid rgba(0,0,0,.08);
      border-radius: 22px;
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .rest-hero-inner{
      padding: 10px 12px;
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .rest-logo{
      width: 195px;
      height: 195px;
      border-radius: 0;
      background: transparent;
      border: none;
      box-shadow: none;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow: visible;
      flex:0 0 auto;

      position: relative;
      padding-right: 8px;   /* espacio antes del divisor */
      margin-right: 8px;
    }
    .rest-logo::after{
      content:"";
      position:absolute;
      top: 8px;
      bottom: 8px;
      right: 0;
      width: 1px;
      background: rgba(107,114,128,.25); /* gris muy delgado */
    }
    .rest-logo img{width:195px; height:195px; object-fit:contain;}
    .rest-copy h1{
      margin:0;
      font-size: 22px;
      font-weight: 950;
      letter-spacing: .2px;
    }
    .rest-copy p{
      margin:6px 0 0;
      color:#374151;
      font-size: 13.5px;
      line-height: 1.35;
      max-width: 72ch;
    }

    /* ===== Horario de atenciÃ³n ===== */
    .rest-hero-inner{
      align-items: stretch;
      flex-wrap: nowrap;
    }
    .rest-copy{
      display:flex;
      flex-direction:column;
      justify-content:center;
    }
    .rest-hours{
      position: relative;
      padding-left: 6px;
      padding-right: 8px;
      margin:6px 0 0;
      min-width: 200px;
      display:flex;
      flex-direction: column;
      justify-content: center;
    }
    .rest-hours::before{
      content:"";
      position:absolute;
      top: 8px;
      bottom: 8px;
      left: 0;
      width: 1px;
      background: rgba(107,114,128,.25);
    }
    .rest-hours-title{
      font-weight: 950;
      font-size: 13px;
      color: #111827;
      margin-bottom: 4px;
    }
    .rest-hours-time{
      font-size: 13px;
      color: #374151;
      line-height: 1.35;
    }
    .rest-badges{
      margin-top: 10px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius: 999px;
      background: rgba(226,31,12,.08);
      border: 1px solid rgba(226,31,12,.18);
      color:#7a1409;
      font-weight: 900;
      font-size: 12px;
    }

    /* ===== Tabs de secciones ===== */
    .tabs{
      margin-top: 12px;
      position: static; /* ya no flota */
      top: auto;
      z-index: auto;
    }
    .tabs-inner{
      background: rgba(245,235,220,.92);
      backdrop-filter: blur(8px);
      border-radius: 999px;
      border:1px solid rgba(0,0,0,.08);
      box-shadow: 0 12px 26px rgba(17,24,39,.08);
      padding: 8px;
      display:flex;
      gap:8px;
      overflow:auto;
      scrollbar-width:none;
    }
    .tabs-inner::-webkit-scrollbar{display:none}
    .tab{
      border:none;
      border-radius: 999px;
      padding: 10px 12px;
      background:#fff;
      border:1px solid rgba(0,0,0,.10);
      font-weight: 950;
      font-size: 13px;
      cursor:pointer;
      white-space:nowrap;
    }
    .tab.active{
      background: var(--brand);
      color:#fff;
      border-color: var(--brand);
      box-shadow: 0 14px 22px rgba(226,31,12,.20);
    }

    /* ===== Grid productos ===== */
    .block{
      margin-top: 14px;
    }
    .block-title{
      margin: 18px 0 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .block-title h3{
      margin:0;
      font-size: 18px;
      font-weight: 950;
    }
    .block-title small{color: var(--muted); font-weight: 800;}
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap:14px;
    }

    /* ===== Tarjeta producto (reuse p-card) ===== */
    .p-card{
      border-radius: 14px;
      background:#fff;
      border:1px solid rgba(0,0,0,.08);
      box-shadow: var(--shadow2);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      padding: 14px 14px 16px;
      min-height: 250px;
    }
    .p-imgbox{
      height: 120px;
      border-radius: 12px;
      background: #ffffff;
      display:grid;
      place-items:center;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.06);
    }
    .p-imgbox .ph{
      width:100%;
      height:100%;
      display:grid;
      place-items:center;
      color:#6b7280;
      font-weight:950;
      font-size:12px;
      background: linear-gradient(180deg, #fff, #fff6ef);
    }
    .p-name{
      margin: 12px 0 0;
      font-weight: 950;
      font-size: 13.5px;
      line-height: 1.15;
      min-height: 34px;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    .p-desc{
      margin: 8px 0 0;
      color:#4b5563;
      font-size: 12.5px;
      line-height: 1.3;
      display:-webkit-box;
      -webkit-line-clamp:3;
      -webkit-box-orient:vertical;
      overflow:hidden;
      min-height: 48px;
    }
    .p-price{
      margin-top: 10px;
      font-weight: 950;
      font-size: 15px;
      color:#111827;
    }
    .p-actions{
      margin-top:auto;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      padding-top: 12px;
    }
    .p-add{
      border-radius: 999px;
      padding: 10px 12px;
      background:#fff;
      border: 2px solid var(--brand);
      color: var(--brand);
      font-weight: 950;
      cursor:pointer;
      box-shadow: 0 10px 18px rgba(17,24,39,.05);
      transition: transform .08s ease, background .15s ease, filter .15s ease;
      width: 170px;
    }
    .p-add:hover{background: rgba(226,31,12,.06); filter:brightness(1.02);}
    .p-add:active{transform: translateY(1px);}

    /* ================= MODAL PERSONALIZAR ================= */
    #customModal {
      display: none;
      position: fixed;
      inset: 0;
      align-items: center;
      justify-content: center;
      background: rgba(17,24,39,.55);
      z-index: 9999;
      padding: 18px;
    }
    #customModal.show { display: flex; }
        .custom-sheet{
      max-width: 640px;
      width: min(640px, 100%);
      max-height: calc(100vh - 36px); /* âœ… evita que se salga */
      background:#fff;
      border-radius: 22px;
      overflow:hidden;
      box-shadow: 0 28px 80px rgba(0,0,0,.35);
      border:1px solid rgba(0,0,0,.10);
      display:flex;
      flex-direction:column;
    }
        .custom-head{
      position: sticky; /* âœ… siempre visible */
      top: 0;
      z-index: 5;
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      padding:14px;
      border-bottom: 1px solid rgba(0,0,0,.10);
      background: var(--brand);
    }
    .custom-title{margin:0; font-size:18px; font-weight:950; color:#fff;}
    .custom-sub{margin:6px 0 0; color: rgba(255,255,255,.90); font-size:13px; line-height:1.3;}
    .xbtn{
      border:none;
      background:#f3f4f6;
      border:1px solid rgba(0,0,0,.10);
      border-radius:14px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:950;
      flex:0 0 auto;
    }
        .custom-body{
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:14px;
      overflow-y:auto; /* âœ… scroll interno */
      -webkit-overflow-scrolling: touch;
      flex: 1 1 auto;
    }
    .opt-card{
      border:1px solid rgba(0,0,0,.08);
      border-radius:18px;
      padding:12px;
      background:#fff;
      box-shadow: 0 10px 18px rgba(17,24,39,.06);
    }
    .opt-card h4{margin:0 0 10px; font-size:14px; font-weight:950;}
    .opt-grid{display:grid; grid-template-columns: 1fr 1fr; gap:10px;}
    .opt{
      border:1px solid rgba(0,0,0,.08);
      border-radius:16px;
      padding:10px;
      display:flex;
      gap:10px;
      align-items:flex-start;
      cursor:pointer;
      user-select:none;
      background:#fff;
    }
    .opt:hover{background:#fafafa}
    .opt input{margin-top:2px}
    .opt small{color:#6b7280; display:block; margin-top:3px}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;}
    .qty-box{display:flex; align-items:center; gap:8px;}
    .qty-btn{
      width:38px;height:38px;border-radius:14px;border:1px solid rgba(0,0,0,.10);
      background:#f3f4f6;font-weight:950;cursor:pointer;
    }
    .qty-num{min-width:26px;text-align:center;font-weight:950;}
    .add-btn{
      border-radius:999px;
      border:none;
      background: var(--brand);
      color:#fff;
      font-weight:950;
      padding:12px 14px;
      cursor:pointer;
      box-shadow: 0 16px 30px rgba(226,31,12,.20);
    }
        .custom-footer{
      position: sticky;
      bottom: 0;
      z-index: 4;
      background: linear-gradient(180deg, rgba(255,255,255,.85), #fff 40%);
      border-top: 1px solid rgba(0,0,0,.10);
    }

.req-note{
      font-size: 12px;
      color:#6b7280;
      margin-top:-6px;
    }

    /* ================= CARRITO (MODAL) ================= */
    #cartModal{display:none; position:fixed; inset:0; background:rgba(17,24,39,.55); z-index:9999;}
    .cart-sheet{
      max-width:560px;
      margin:60px auto;
      background:#fff;
      border-radius:22px;
      overflow:hidden;
      box-shadow: 0 28px 80px rgba(0,0,0,.35);
      border:1px solid rgba(0,0,0,.10);
    }

    /* ================= FOOTER (igual estilo) ================= */
    footer{
      background: var(--brand);
      color:#fff;
      margin-top: 0;
      padding-top: 18px;
    }
    footer .fcol, footer, footer p, footer a { font-size: calc(1rem + 1px); }
    .footer-inner{
      padding: 26px 0;
      display:grid;
      grid-template-columns: 1.2fr 1fr 1fr 1.2fr;
      gap:18px;
    }
    .f-title{
      font-weight:950;
      margin: 0 0 10px;
      font-size:14px;
      color:#fff;
    }
    .f-muted{color: rgba(255,255,255,.86); font-size:13px; margin:0 0 10px; line-height:1.35;}
    .f-links{display:flex; flex-direction:column; gap:8px; font-size:13px; color: rgba(255,255,255,.90);}
    .f-links a{color: rgba(255,255,255,.92)}
    .f-links a:hover{text-decoration:underline;color:#fff}
    .footer-logo{
      width: 120px;
      height:auto;
      margin-bottom: 10px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.18));
    }
    .contact-lines{font-size:13px;color: rgba(255,255,255,.92);display:flex;flex-direction:column;gap:8px;}
    .social{display:flex; gap:10px; align-items:center; margin-top:10px;}
    .social a{
      width:34px;height:34px;border-radius:999px;
      background: rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.22);
      display:grid;place-items:center;
      box-shadow: 0 10px 18px rgba(0,0,0,.12);
    }
    .social svg *{stroke:#fff !important; fill:#fff !important;}
    .book-plain{display:flex; flex-direction:column; gap:10px;}
    .book-plain img{width: 160px; max-width: 100%; height:auto; object-fit:contain; background: transparent;}
    .pay-plain{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:6px;}
    .pay-plain img{height:22px; width:auto; background:#fff; border-radius:8px; border:1px solid rgba(255,255,255,.12); padding:6px 8px;}
    .footer-bottom{
      border-top: 1px solid rgba(255,255,255,.18);
      padding: 12px 0;
      color: rgba(255,255,255,.85);
      font-size:12px;
    }

    /* ================= VISTA MÃ“VIL ================= */
    @media (max-width: 560px){
      main { padding-bottom: 70px !important; }

      .header-wrap .container{ padding-left: 0; padding-right: 0; }
      .header-bar{
        flex-wrap: nowrap;
        padding: 0px 4px;
        border-radius: var(--radiusHeader);
        gap: 6px;
        margin: 0;
        width: 100%;
        height: 55px;
      }
      .logo{ width: 30px; height: 30px; margin-bottom: 4px; margin-left: 10px;}
      .search{
        flex: 1 1 auto;
        display: flex;
        height: 36px;
        min-width: 0;
        margin: 6px 0;
        padding: 0 10px;
        align-items: center;
      }
      .search input{ font-size: 13px; height: 95%; }
      .cart-pill{
        height: 36px;
        padding: 6px 6px;
        flex-shrink: 0;
        margin-right: 10px;
        gap: 6px;
      }
      .cart-pill .total-badge{ min-width: 70px; padding: 4px 6px; font-size: 11px; }

      .info-block{ display:none !important; }

      .rest-logo{ width:auto; height:auto; padding-right:0; margin-right:0; }
      .rest-logo::after{ display:none; }
      .rest-logo img{ width: 195px; height: 195px; }
      .rest-copy h1{ font-size: 19px; }
      .tabs{ top: auto; }
      .opt-grid{ grid-template-columns: 1fr; }
      .footer-inner{ grid-template-columns: 1fr; gap:0; }
      .footer-inner > div{ border-bottom: 1px solid rgba(255, 255, 255, 0.18); padding: 10px 0; }
      .footer-inner > div:last-child{ border-bottom: none; }
    }

    /* ===== WhatsApp flotante (igual) ===== */
    .wa-float{
      position: fixed;
      right: 16px;
      bottom: 16px;
      width: 50px;
      height: 50px;
      border-radius: 999px;
      display: grid;
      place-items: center;
      background: transparent;
      box-shadow: none;
      z-index: 120;
      overflow: visible;
    }
    .wa-float .wa-icon{
      width: 50px;
      height: 50px;
      object-fit: contain;
      display: block;
      position: relative;
      z-index: 2;
    }
    @media (max-width: 560px){
      .wa-float{
        bottom: calc(16px + 12px + env(safe-area-inset-bottom));
      }
    }
    .wa-float::before,
    .wa-float::after{
      content:"";
      position:absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) scale(.75);
      width: 74px;
      height: 74px;
      border-radius: 999px;
      border: 3px solid rgba(226,31,12,.55);
      opacity: 0;
      pointer-events:none;
      z-index: 1;
      animation: waRipple 1.7s ease-out infinite;
    }
    .wa-float::after{
      width: 92px;
      height: 92px;
      border-color: rgba(226,31,12,.35);
      animation-delay: .55s;
    }
    @keyframes waRipple{
      0%   { opacity: 0; transform: translate(-50%, -50%) scale(.70); }
      15%  { opacity: 1; }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(1.25); }
    }
    @media (prefers-reduced-motion: reduce){
      .wa-float::before,
      .wa-float::after{ animation: none; opacity: 0; }
    }
    /* ================= REST HERO â€“ MOBILE FIX ================= */
    @media (max-width: 560px){
    
      .rest-hero-inner{
        flex-direction: column;   /* logo arriba */
        align-items: center;      /* centra todo */
        text-align: center;
        flex-wrap: wrap;
        padding: 8px 10px;   /* menos aire arriba/abajo */
        gap: 6px;            /* logo y textos mÃ¡s pegados */
      }
    
      .rest-logo{
        margin: 0 auto;
      }
      .rest-logo img{ width: 195px; height: 195px; }
    
      .rest-copy{
        text-align: center;
        max-width: 100%;
      }
    
      .rest-copy h1{
        text-align: center;
        font-size: 20px;
        margin-bottom: 6px;
      }
    
      .rest-copy p{
        text-align: justify;      /* ðŸ‘ˆ lo que pediste */
        font-size: 13.5px;
        line-height: 1.45;
        margin-top: 4px;     /* menos espacio entre tÃ­tulo y texto */
      }


      .rest-hours{
        width: 100%;
        margin-left: 0;
        padding-left: 0;
        margin-top: 6px;
        border-top: 1px solid rgba(107,114,128,.20);
        padding-top: 6px;
      }
      .rest-hours::before{ display:none; }
      .rest-hours-title{ text-align:center; }
      .rest-hours-time{ text-align:center; }
    }
  </style>
</head>

<body>

<header>
  <div class="header-wrap">
    <div class="container">
      <div class="header-bar">

        <a class="logo" aria-label="Pacha Eats" href="index.html" title="Volver al inicio">
          <img src="img/logos/Logo1.png" alt="Logo Pacha Eats">
        </a>

        <div class="search" role="search" aria-label="Buscar en Pacha Wok">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.3-4.3m1.3-5.2a7.5 7.5 0 11-15 0 7.5 7.5 0 0115 0z"
              stroke="#e21f0c" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <label class="sr-only" for="q">Buscar</label>
          <input id="q" type="search" placeholder="Buscar en Pacha Wok..." />
        </div>

        <a class="info-block delivery" href="#" aria-label="Comienza tu pedido - Ingresa una ubicaciÃ³n">
          <div class="icon" aria-hidden="true">
            <svg width="36" height="36" viewBox="0 0 24 24" fill="none">
              <path d="M4 14h3l2-4h4l2 3h1.5" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M16 10h2.2l2.3 2.4" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M7 18a2.2 2.2 0 100-4.4A2.2 2.2 0 007 18Z" stroke="white" stroke-width="1.6"/>
              <path d="M18 18a2.2 2.2 0 100-4.4A2.2 2.2 0 0018 18Z" stroke="white" stroke-width="1.6"/>
              <path d="M3 10h4" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M2.5 12h3.5" stroke="white" stroke-width="1.6" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="lines">
            <div class="top">Comienza tu pedido</div>
            <div class="bottom">Ingresa una ubicaciÃ³n</div>
          </div>
          <div class="chev" aria-hidden="true">â–¼</div>
        </a>

        <button class="cart-pill" id="openCart" type="button" aria-label="Abrir carrito">
          <span aria-hidden="true" style="display:grid;place-items:center;">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M6 6h15l-2 9H7L6 6Z" stroke="#e21f0c" stroke-width="1.8" stroke-linejoin="round"/>
              <path d="M6 6 5 3H2" stroke="#e21f0c" stroke-width="1.8" stroke-linecap="round"/>
              <circle cx="9" cy="20" r="1.6" fill="#e21f0c"/>
              <circle cx="18" cy="20" r="1.6" fill="#e21f0c"/>
            </svg>
          </span>
          <span class="total-badge" id="cartTotalBadge">S/ 0.00</span>
        </button>

      </div>
    </div>
  </div>
</header>

<main>
  <div class="container">

    <!-- ===== Encabezado restaurante (reemplaza "Productos") ===== -->
    <section class="rest-hero" aria-label="Pacha Wok">
      <div class="rest-hero-inner">
        <div class="rest-logo" aria-hidden="true">
          <img src="img/logos/restaurantes/Pacha Wok.png" alt="Pacha Wok">
        </div>
        <div class="rest-copy" style="min-width:240px; flex:1;">
         <p><b>El sabor oriental del Valle</b>, con ese toque chifa peruano que enamora: wok al fuego, sillao, tamarindo y combinaciones clÃ¡sicas (Â¡chaufa, aeropuerto, tallarÃ­n!) hechas para compartir.</p>
        </div>
        <div class="rest-hours" aria-label="Horario de atenciÃ³n">
          <div class="rest-hours-title">Horario de atenciÃ³n</div>
          <div class="rest-hours-time">De Lunes a Domingo de 12:00 p.m. a 11:00 p.m.</div>
        </div>
      </div>
    </section>

    <!-- ===== Tabs secciones ===== -->
    <section class="tabs" aria-label="Secciones">
      <div class="tabs-inner" id="tabs"></div>
    </section>

    <!-- ===== Productos ===== -->
    <section class="block" id="menuRoot" aria-label="Carta Pacha Wok"></section>

  </div>
</main>

<!-- ================= MODAL PERSONALIZAR ================= -->
<div id="customModal" aria-hidden="true">
  <div class="custom-sheet" role="dialog" aria-label="Personaliza tu producto">
    <div class="custom-head">
      <div>
        <h3 class="custom-title" id="customTitle">Personaliza tu producto</h3>
        <p class="custom-sub" id="customSub">â€”</p>
      </div>
      <button class="xbtn" id="closeCustom" type="button">âœ•</button>
    </div>

    <div class="custom-body">
      <div class="req-note" id="reqNote"></div>

      <div id="customGroups"></div>

      <div class="opt-card custom-footer">
        <div class="row">
          <div>
            <div style="font-size:12px; color:#6b7280;">Total</div>
            <div style="font-weight:950; font-size:18px;" id="customTotal">S/ 0.00</div>
            <div style="font-size:12px; color:#6b7280;" id="customBreakdown"></div>
          </div>
          <div class="qty-box">
            <button class="qty-btn" id="qtyDec" type="button">âˆ’</button>
            <div class="qty-num" id="qtyNum">1</div>
            <button class="qty-btn" id="qtyInc" type="button">+</button>
          </div>
        </div>

        <div style="margin-top:12px; display:flex; justify-content:flex-end;">
          <button class="add-btn" id="addFromCustom" type="button">Agregar al carrito</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ================= CARRITO (MODAL) ================= -->
<div id="cartModal" aria-hidden="true">
  <div class="cart-sheet">
    <div style="display:flex; align-items:center; justify-content:space-between; padding:14px; border-bottom:1px solid rgba(0,0,0,.08); background: linear-gradient(180deg, #fff, #fff6ef);">
      <strong>ðŸ›’ Tu carrito</strong>
      <button id="closeCart" type="button"
        style="border:none; background:#f3f4f6; border:1px solid rgba(0,0,0,.10); border-radius:14px; padding:8px 10px; cursor:pointer; font-weight:950;">âœ•</button>
    </div>

    <div id="cartItems" style="padding:14px; display:flex; flex-direction:column; gap:10px; max-height:55vh; overflow:auto;"></div>

    <div style="padding:14px; border-top:1px solid rgba(0,0,0,.08); display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;">
      <strong>Total: <span id="cartTotalText">S/ 0.00</span></strong>
      <div style="display:flex; gap:8px; flex-wrap:wrap;">
        <button id="clearCart" type="button"
          style="border-radius:999px; border:1px solid rgba(0,0,0,.10); background:#fff; padding:10px 12px; font-weight:950; cursor:pointer;">Vaciar</button>
        <button id="checkout" type="button"
          style="border-radius:999px; border:none; background:#111; color:#fff; padding:10px 12px; font-weight:950; cursor:pointer;">Finalizar</button>
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="footer-inner">

      <div>
        <img class="footer-logo" src="img/logos/Logo2.png" alt="Logo Pacha Eats">
        <div class="f-title">ConÃ©ctate con nosotros</div>

        <div class="contact-lines">
          <div><b>Whatsapp:</b> +51925915905</div>
          <div><b>Correo:</b> contacto@pachaeats.com</div>
        </div>

        <div class="social" aria-label="Redes">
          <a href="#" aria-label="Instagram">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M7 2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5Z" stroke="#fff" stroke-width="1.8"/>
              <path d="M12 17a5 5 0 100-10 5 5 0 000 10Z" stroke="#fff" stroke-width="1.8"/>
              <path d="M17.5 6.5h.01" stroke="#fff" stroke-width="3" stroke-linecap="round"/>
            </svg>
          </a>
          <a href="#" aria-label="Facebook">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M14 8h3V5h-3a4 4 0 00-4 4v3H7v3h3v7h3v-7h3l1-3h-4V9a1 1 0 011-1Z" fill="#fff"/>
            </svg>
          </a>
          <a href="#" aria-label="TikTok">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M14 3v10.2a4.3 4.3 0 11-3.2-4.1V6.7a7.8 7.8 0 003.2 1.2c1.1.2 2.3.1 3.4-.2V4.5c-1.2.4-2.5.4-3.7-.1A4.7 4.7 0 0114 3Z" fill="#fff"/>
            </svg>
          </a>
        </div>
      </div>

      <div>
        <div class="f-title">Sobre Nosotros</div>
        <div class="f-links">
          <a href="#">Trabaja con nosotros</a>
          <a href="#">Horarios, locales y zonas de reparto</a>
          <a href="#">Ventas corporativas</a>
          <a href="#">Comprobantes electrÃ³nicos</a>
        </div>
      </div>

      <div>
        <div class="f-title">PolÃ­ticas &amp; TÃ©rminos</div>
        <div class="f-links">
          <a href="#">TÃ©rminos y condiciones de la web</a>
          <a href="#">PolÃ­ticas de privacidad</a>
          <a href="#">PolÃ­ticas de delivery y pick up</a>
          <a href="#">TÃ©rminos y condiciones de promociones y campaÃ±as</a>
          <a href="#">LÃ­nea Ã‰tica</a>
          <a href="#">PolÃ­tica de cookies</a>
        </div>
      </div>

      <div>
        <div class="f-title">Libro de reclamaciones</div>
        <div class="book-plain">
          <img src="img/logos/Libro.png" alt="Libro de reclamaciones">
        </div>

        <div class="f-title" style="margin-top:14px;">MÃ©todos de Pago</div>
        <div class="pay-plain">
          <img alt="Visa" src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg">
          <img alt="Mastercard" src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg">
          <img alt="Amex" src="https://upload.wikimedia.org/wikipedia/commons/3/30/American_Express_logo.svg">
        </div>
      </div>

    </div>

    <div class="footer-bottom">
      Â© <span id="year"></span> Pacha Eats. Todos los derechos reservados.
    </div>
  </div>
</footer>

<!-- WhatsApp flotante -->
<a
  class="wa-float"
  href="https://wa.me/51925915905?text=Hola%20Pacha%20Eats%2C%20quisiera%20hacer%20un%20pedido%20de%20Pacha%20Wok."
  target="_blank"
  rel="noopener"
  aria-label="Chatear por WhatsApp"
>
  <img class="wa-icon" src="img/logos/LogoWhatsappRojo.png" alt="WhatsApp">
</a>

<script>
  // ================== HELPERS ==================
  const CART_KEY = "pacha_cart_v_wok_1";
  const $ = (s) => document.querySelector(s);
  const $$ = (s) => Array.from(document.querySelectorAll(s));
  const money = (n) => "S/ " + Number(n||0).toFixed(2);
  const escapeHtml = (str) => String(str).replace(/[&<>"']/g, m => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
  }[m]));

  // ================== OPCIONES REUTILIZABLES ==================
  const OPT = {
    salsasOrientales: {
      id:"salsas",
      title:"Salsas orientales",
      type:"check",
      required:false,
      choices:[
        { id:"tam", label:"Salsa tamarindo", add:0 },
        { id:"soya", label:"Salsa de soya", add:0 },
      ],
      defaultIds:["tam"]
    },

    bebidaPersonal: {
      id:"bebida",
      title:"Â¿Alguna bebida personal?",
      type:"radio",
      required:false,
      choices:[
        { id:"none", label:"Sin bebida", add:0 },
        { id:"inca450", label:"Inca Kola 450 ml.", add:3.50 },
        { id:"coca450", label:"Coca Cola 450 ml.", add:3.50 },
        { id:"pepsi500", label:"Pepsi 500 ml.", add:3.00 },
        { id:"gua450", label:"GuaranÃ¡ 450 ml.", add:3.00 }
      ],
      defaultId:"none"
    },

    bebidaPersonal_comboClasico: {
      id:"bebida",
      title:"Â¿Alguna bebida personal?",
      type:"radio",
      required:false,
      choices:[
        { id:"pepsi500", label:"Pepsi 500 ml. (seleccionado)", add:0.00 },
        { id:"inca450", label:"Inca Kola 450 ml.", add:3.50 },
        { id:"coca450", label:"Coca Cola 450 ml.", add:3.50 },
        { id:"gua450", label:"GuaranÃ¡ 450 ml.", add:3.00 }
      ],
      defaultId:"pepsi500"
    },

    wantanSide: {
      id:"wantan_side",
      title:"Wantan frito",
      type:"radio",
      required:false,
      choices:[
        { id:"none", label:"Sin wantanes", add:0 },
        { id:"3", label:"3 und", add:5.00 },
        { id:"6", label:"6 und", add:9.00 },
        { id:"12", label:"12 und", add:16.00 }
      ],
      defaultId:"none"
    },

    wantanSide_comboClasico: {
      id:"wantan_side",
      title:"Wantan frito",
      type:"radio",
      required:true,
      choices:[
        { id:"3", label:"3 und (seleccionado)", add:0.00 },
        { id:"6", label:"6 und", add:9.00 },
        { id:"12", label:"12 und", add:16.00 }
      ],
      defaultId:"3"
    },

    tipoArrozChaufa: {
      id:"tipo_arroz",
      title:"Tipo de arroz chaufa (Obligatorio)",
      type:"radio",
      required:true,
      choices:[
        { id:"pollo", label:"Chaufa de Pollo", add:0 },
        { id:"chancho", label:"Chaufa de chancho", add:2.00 },
        { id:"especial", label:"Chaufa especial", add:15.00 }
      ],
      defaultId:"pollo"
    },

    tipoArrozChaufa_combo: {
      id:"tipo_arroz",
      title:"Tipo de arroz chaufa (Obligatorio)",
      type:"radio",
      required:true,
      choices:[
        { id:"pollo", label:"Chaufa de Pollo", add:0 },
        { id:"chancho", label:"Chaufa de chancho", add:2.00 },
        { id:"especial", label:"Chaufa especial", add:5.00 }
      ],
      defaultId:"pollo"
    },

    tamanioMedGrande: {
      id:"tam",
      title:"TamaÃ±o (Obligatorio)",
      type:"radio",
      required:true,
      choices:[
        { id:"med", label:"Mediano", add:0 },
        { id:"gde", label:"Grande", add:5.00 }
      ],
      defaultId:"med"
    },

    tipoAeropuerto: {
      id:"tipo_aero",
      title:"Tipo de aeropuerto (Obligatorio)",
      type:"radio",
      required:true,
      choices:[
        { id:"pollo", label:"Aeropuerto de pollo", add:0 },
        { id:"chancho", label:"Aeropuerto de chancho", add:3.00 },
        { id:"especial", label:"Aeropuerto especial", add:12.00 }
      ],
      defaultId:"pollo"
    },

    tipoTallarin: {
      id:"tipo_tallarin",
      title:"Tipo de tallarÃ­n (Obligatorio)",
      type:"radio",
      required:true,
      choices:[
        { id:"pollo", label:"Pollo", add:0 },
        { id:"chancho", label:"Chancho", add:3.00 },
        { id:"especial", label:"Especial", add:15.00 }
      ],
      defaultId:"pollo"
    },

    tipoCombinado: {
      id:"tipo_comb",
      title:"Tipo de combinado (Obligatorio)",
      type:"radio",
      required:true,
      choices:[
        { id:"pollo", label:"Combinado de pollo", add:0 },
        { id:"chancho", label:"Combinado de chancho", add:3.00 },
        { id:"especial", label:"Combinado especial", add:13.00 }
      ],
      defaultId:"pollo"
    },

    sopaWantanTipo: {
      id:"tipo_sopa",
      title:"Tipo de sopa (Obligatorio)",
      type:"radio",
      required:true,
      choices:[
        { id:"pollo", label:"Pollo", add:0 },
        { id:"chancho", label:"Chancho", add:5.00 },
        { id:"especial", label:"Especial", add:7.00 }
      ],
      defaultId:"pollo"
    },

    dimsum_wantanFrito_tamanio: {
      id:"tamanio_dimsum",
      title:"TamaÃ±o (Obligatorio)",
      type:"radio",
      required:true,
      choices:[
        { id:"6", label:"6 und", add:0 },
        { id:"12", label:"12 und", add:7.00 }
      ],
      defaultId:"6"
    },

    dimsum_wantanesPW_tamanio: {
      id:"tamanio_dimsum",
      title:"TamaÃ±o (Obligatorio)",
      type:"radio",
      required:true,
      choices:[
        { id:"3", label:"3 und", add:0 },
        { id:"6", label:"6 und", add:5.00 },
        { id:"12", label:"12 und", add:14.00 }
      ],
      defaultId:"3"
    },

    arrozEspeciales: {
      id:"arroz_especial",
      title:"Tipo arroz (Obligatorio)",
      type:"radio",
      required:true,
      choices:[
        { id:"simple", label:"Chaufa simple", add:0 },
        { id:"pollo", label:"Chaufa de pollo", add:3.00 },
        { id:"chancho", label:"Chaufa de chancho", add:4.00 },
        { id:"especial", label:"Chaufa especial", add:5.00 }
      ],
      defaultId:"simple"
    },

    bebidaFamiliar: {
      id:"bebida_fam",
      title:"Alguna bebida familiar",
      type:"radio",
      required:true,
      choices:[
        { id:"inca15", label:"Inka Cola 1.5 Lt", add:8.50 },
        { id:"pepsi15", label:"Pepsi 1.5 Lt", add:6.50 },
        { id:"coca15", label:"Coca cola 1.5 Lt", add:8.00 }
      ],
      defaultId:"pepsi15"
    }
  };

  // ================== DATA MENU ==================
  const SECTIONS = [
    { id:"combos",    name:"Combos" },
    { id:"dimsums",   name:"Dim Sums" },
    { id:"sopas",     name:"Sopas" },
    { id:"clasicos",  name:"ClÃ¡sicos" },
    { id:"especiales",name:"Especiales" },
    { id:"banquetes", name:"Banquetes" }
  ];

  // Nota: imÃ¡genes placeholder (puedes cambiarlas a rutas reales si tienes)
  const menu = [
    // ===== Combos =====
    {
      id:"combo_personal_clasico",
      section:"combos",
      name:"Combo personal ClÃ¡sico",
      desc:"01 chaufa + 03 wantanes fritos + 01 gaseosa",
      price:14.90,
      groups:[
        OPT.tipoArrozChaufa_combo,
        OPT.bebidaPersonal_comboClasico,
        OPT.wantanSide_comboClasico
      ]
    },
    {
      id:"combo_para_2",
      section:"combos",
      name:"Combo para 2",
      desc:"01 Arroz chaufa grande + 01 porciÃ³n de Chi Jau Kay + 01 porciÃ³n de Tipakay + 04 wantanes fritos",
      price:44.90,
      groups:[
        OPT.bebidaPersonal
      ]
    },

    // ===== Dim Sums =====
    {
      id:"dimsum_wantan_frito",
      section:"dimsums",
      name:"Wantan frito",
      desc:"PorciÃ³n de wantanes rellenos acompaÃ±ados con salsa tamarindo.",
      price:9.00,
      groups:[ OPT.dimsum_wantanFrito_tamanio ]
    },
    {
      id:"dimsum_wantanes_pacha_wok",
      section:"dimsums",
      name:"Wantanes Pacha Wok",
      desc:"Wantan frito relleno con chanchito y langostinos picados, acompaÃ±ados de tamarindo Kam Lu.",
      price:7.00,
      groups:[ OPT.dimsum_wantanesPW_tamanio ]
    },

    // ===== Sopas =====
    {
      id:"sopa_wantan",
      section:"sopas",
      name:"Sopa WantÃ¡n",
      desc:"La tradicional sopa a base de wantan relleno. PÃ­dela de pollo, chancho o versiÃ³n especial.",
      price:15.00,
      groups:[ OPT.sopaWantanTipo ]
    },
    {
      id:"sopa_pac_pow",
      section:"sopas",
      name:"Sopa Pac Pow",
      desc:"Mezcla de fideo fansy + huevo batido.",
      price:17.00,
      groups:[ OPT.salsasOrientales ]
    },
    {
      id:"sopa_womin",
      section:"sopas",
      name:"Sopa WomÃ­n",
      desc:"Sopa a base de pollo.",
      price:16.00,
      groups:[ OPT.salsasOrientales ]
    },
    {
      id:"sopa_fuchifu",
      section:"sopas",
      name:"Sopa FuchifÃº",
      desc:"La mezcla perfecta de huevo batido y verduras picadas.",
      price:17.00,
      groups:[ OPT.salsasOrientales ]
    },

    // ===== ClÃ¡sicos =====
    {
      id:"arroz_chaufa",
      section:"clasicos",
      name:"Arroz Chaufa",
      desc:"El clÃ¡sico chaufa flameado en el wok.",
      price:18.00,
      groups:[
        OPT.tamanioMedGrande,
        OPT.tipoArrozChaufa,
        OPT.salsasOrientales,
        OPT.bebidaPersonal,
        OPT.wantanSide
      ]
    },
    {
      id:"aeropuerto",
      section:"clasicos",
      name:"Aeropuerto",
      desc:"Infaltable en nuestra carta, con su toque flameado.",
      price:20.00,
      groups:[
        OPT.tamanioMedGrande,
        OPT.tipoAeropuerto,
        OPT.bebidaPersonal,
        OPT.salsasOrientales,
        OPT.wantanSide
      ]
    },
    {
      id:"tallarin_saltado",
      section:"clasicos",
      name:"TallarÃ­n saltado",
      desc:"TallarÃ­n y verduras salteadas en el wok.",
      price:18.00,
      groups:[
        OPT.tipoTallarin,
        OPT.salsasOrientales,
        OPT.bebidaPersonal,
        OPT.wantanSide
      ]
    },
    {
      id:"combinado",
      section:"clasicos",
      name:"Combinado",
      desc:"TallarÃ­n saltado + chaufa flameado en el wok.",
      price:20.00,
      groups:[
        OPT.tamanioMedGrande,
        OPT.tipoCombinado,
        OPT.bebidaPersonal,
        OPT.salsasOrientales,
        OPT.wantanSide
      ]
    },

    // ===== Especiales (Tipakay -> Kam lÃº wantan con tipo arroz obligatorio + bebida + salsas + wantan) =====
    {
      id:"tipakay",
      section:"especiales",
      name:"Tipakay",
      desc:"Pollo empanizado en salsa tamarindo, acompaÃ±ado con arroz chaufa.",
      price:20.00,
      groups:[ OPT.arrozEspeciales, OPT.bebidaPersonal, OPT.salsasOrientales, OPT.wantanSide ]
    },
    {
      id:"chijaukay",
      section:"especiales",
      name:"Chijaukay",
      desc:"Pollo en trozos con salsa de mensÃ­, tausÃ­ y sillao, acompaÃ±ado con arroz chaufa.",
      price:20.00,
      groups:[ OPT.arrozEspeciales, OPT.bebidaPersonal, OPT.salsasOrientales, OPT.wantanSide ]
    },
    {
      id:"pollo_con_verduras",
      section:"especiales",
      name:"Pollo con verduras",
      desc:"Pollo y verduras salteados al wok con salsa de ostiÃ³n, acompaÃ±ado de arroz chaufa.",
      price:19.00,
      groups:[ OPT.arrozEspeciales, OPT.bebidaPersonal, OPT.salsasOrientales, OPT.wantanSide ]
    },
    {
      id:"pollo_con_pina",
      section:"especiales",
      name:"Pollo con piÃ±a",
      desc:"Pechuga de pollo y piÃ±a en salsa tamarindo, servido con arroz chaufa.",
      price:21.00,
      groups:[ OPT.arrozEspeciales, OPT.bebidaPersonal, OPT.salsasOrientales, OPT.wantanSide ]
    },
    {
      id:"kam_lu_wantan",
      section:"especiales",
      name:"Kam lÃº wantan",
      desc:"Pollo, chancho, res, verduras y wantanes en salsa tamarindo + arroz chaufa.",
      price:21.00,
      groups:[ OPT.arrozEspeciales, OPT.bebidaPersonal, OPT.salsasOrientales, OPT.wantanSide ]
    },

    // ===== Especiales (los demÃ¡s: bebida + salsas + wantan) =====
    {
      id:"tallarin_taypa",
      section:"especiales",
      name:"TallarÃ­n TaypÃ¡",
      desc:"TallarÃ­n con todas las carnes, verduras salteadas al wok y a la plancha.",
      price:33.00,
      groups:[ OPT.bebidaPersonal, OPT.salsasOrientales, OPT.wantanSide ]
    },
    {
      id:"lomo_chaufero",
      section:"especiales",
      name:"Lomo chaufero",
      desc:"Lomo saltado con toque oriental, acompaÃ±ado con papas fritas y arroz chaufa.",
      price:24.00,
      groups:[ OPT.bebidaPersonal, OPT.salsasOrientales, OPT.wantanSide ]
    },
    {
      id:"aeropuer_top",
      section:"especiales",
      name:"Aeropuer-TOP",
      desc:"Aeropuerto con todas las carnes + porciÃ³n de Chijaukay + porciÃ³n de Tipakay",
      price:39.90,
      groups:[ OPT.bebidaPersonal, OPT.salsasOrientales, OPT.wantanSide ]
    },

    // ===== Banquetes =====
    {
      id:"combo_familiar_1",
      section:"banquetes",
      name:"Combo familiar 1",
      desc:"02 Chaufa grande + 01 Chi Jau Kay + 01 Kam Lu Wantan + 01 TallarÃ­n especial + 12 wantanes fritos",
      price:135.00,
      groups:[ OPT.bebidaFamiliar ]
    },
    {
      id:"combo_familiar_2",
      section:"banquetes",
      name:"Combo familiar 2",
      desc:"02 Chaufa grande + 01 Tipakay + 01 Taypa + 01 TallarÃ­n especial + 12 wantanes fritos",
      price:145.00,
      groups:[ OPT.bebidaFamiliar ]
    },
    {
      id:"combo_para_8",
      section:"banquetes",
      name:"Combo para 8",
      desc:"02 Chaufa grande + 01 Aeropuerto de chancho + 01 Tipakay + 01 Chijaukay + 01 Kam Lu Wantan + 01 TallarÃ­n especial + 12 Wantanes",
      price:160.00,
      groups:[ OPT.bebidaFamiliar ]
    }
  ];

  // ================== CART ==================
  let cart = loadCart();
  function loadCart(){
    try{ const raw = localStorage.getItem(CART_KEY); return raw ? JSON.parse(raw) : {}; }
    catch(e){ return {}; }
  }
  function saveCart(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }
  function cartTotal(){ return Object.values(cart).reduce((acc, it) => acc + it.price*it.qty, 0); }
  function addToCartLine({ key, name, price, qty }){
    if(!cart[key]) cart[key] = { id:key, name, price, qty:0 };
    cart[key].qty += qty;
    saveCart();
    renderCartBadge();
  }
  function changeQty(key, delta){
    if(!cart[key]) return;
    cart[key].qty += delta;
    if(cart[key].qty <= 0) delete cart[key];
    saveCart();
    renderCartBadge();
    renderCartModal();
  }
  function clearCart(){ cart = {}; saveCart(); renderCartBadge(); renderCartModal(); }
  function renderCartBadge(){
    $("#cartTotalBadge").textContent = money(cartTotal());
    $("#cartTotalText").textContent = money(cartTotal());
  }

// ================== UI: TABS + MENU RENDER ==================
  let activeSection = "all"; // âœ… al iniciar: mostrar TODO

  function productCardHTML(p){
    // ðŸ”¥ genera ruta automÃ¡tica desde el nombre del producto
    const imgPath = `img/productos/pacha-wok/${p.name}.jpg`;
  
    return `
      <article class="p-card product-card">
        <div class="p-imgbox">
          <img 
            src="${imgPath}" 
            alt="${escapeHtml(p.name)}"
            onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=ph>Pacha Wok</div>'"
          >
        </div>
  
        <p class="p-name">${escapeHtml(p.name)}</p>
        <p class="p-desc">${escapeHtml(p.desc || "")}</p>
        <div class="p-price">${money(p.price)}</div>
  
        <div class="p-actions">
          <button class="p-add" type="button" data-open-custom="${p.id}">
            Personalizar
          </button>
        </div>
      </article>
    `;
  }
  
  function buildTabs(){
    const root = $("#tabs");
    root.innerHTML = "";

    // Tab "Todos"
    const allBtn = document.createElement("button");
    allBtn.className = "tab" + (activeSection === "all" ? " active" : "");
    allBtn.type = "button";
    allBtn.textContent = "Todos";
    allBtn.addEventListener("click", () => {
      activeSection = "all";
      buildTabs();
      renderMenu();
      const menuRoot = $("#menuRoot");
      window.scrollTo({ top: menuRoot.getBoundingClientRect().top + window.scrollY - 120, behavior:"smooth" });
    });
    root.appendChild(allBtn);

    // Tabs por categorÃ­a
    SECTIONS.forEach(s => {
      const b = document.createElement("button");
      b.className = "tab" + (s.id === activeSection ? " active" : "");
      b.type = "button";
      b.textContent = s.name;
      b.addEventListener("click", () => {
        activeSection = s.id;
        buildTabs();
        renderMenu();
        const menuRoot = $("#menuRoot");
        window.scrollTo({ top: menuRoot.getBoundingClientRect().top + window.scrollY - 120, behavior:"smooth" });
      });
      root.appendChild(b);
    });
  }

  function renderMenu(){
    const root = $("#menuRoot");
    const q = ($("#q").value || "").trim().toLowerCase();

    // Si por algÃºn motivo activeSection estÃ¡ mal, lo corregimos
    if (activeSection !== "all" && !SECTIONS.some(s => s.id === activeSection)) {
      activeSection = "all";
    }

    const secName =
      activeSection === "all"
        ? "Todos los productos"
        : (SECTIONS.find(s => s.id === activeSection)?.name || "Carta");

    // Lista base (TODOS)
    let list = Array.isArray(menu) ? menu.slice() : [];

    // Filtra SOLO si eliges una categorÃ­a
    if (activeSection !== "all") {
      list = list.filter(p => p.section === activeSection);
    }

    // BÃºsqueda
    if (q) {
      list = list.filter(p => (p.name + " " + (p.desc || "")).toLowerCase().includes(q));
    }

    root.innerHTML = `
      <div class="block-title">
        <h3>${escapeHtml(secName)}</h3>
        <small>${list.length} item(s)</small>
      </div>
      <div class="grid">
        ${
          list.length
            ? list.map(productCardHTML).join("")
            : `<div style="grid-column:1/-1; background:rgba(255,255,255,.88); border:1px dashed rgba(0,0,0,.15); border-radius:18px; padding:14px; color:#6b7280;">
                No se encontraron productos con ese nombre.
              </div>`
        }
      </div>
    `;

    root.querySelectorAll("[data-open-custom]").forEach(btn => {
      btn.addEventListener("click", () => {
        const id = btn.getAttribute("data-open-custom");
        const p = menu.find(x => x.id === id);
        if(!p) return;
        openCustomize(p);
      });
    });
  }

  $("#q").addEventListener("input", renderMenu);

  // INIT
  buildTabs();
  renderMenu();
  renderCartBadge();
  $("#year").textContent = String(new Date().getFullYear());

  // ===== Mostrar header al scrollear hacia arriba (oculta al bajar) =====
  (function(){
    const header = document.querySelector("header");
    if(!header) return;

    let lastY = window.scrollY;
    let ticking = false;

    function update(){
      const y = window.scrollY;
      const delta = Math.abs(y - lastY);
      if(delta < 8) return;

      const goingDown = y > lastY;
      if(goingDown && y > 120){
        header.classList.add("is-hidden");
      }else{
        header.classList.remove("is-hidden");
      }
      lastY = y;
    }

    window.addEventListener("scroll", () => {
      if(!ticking){
        requestAnimationFrame(() => {
          update();
          ticking = false;
        });
        ticking = true;
      }
    }, { passive:true });
  })();


// ================== MODAL PERSONALIZAR (DINÃMICO) ==================
  let customProduct = null;
  let customQty = 1;
  let selections = {}; // groupId -> (radioId|string) or (array for check)

  function openCustomize(p){
    customProduct = p;
    customQty = 1;
    selections = {};

    $("#customTitle").textContent = "Personaliza tu producto";
    $("#customSub").textContent = p.name + " â€¢ Base: " + money(p.price);
    $("#qtyNum").textContent = "1";

    // defaults
    (p.groups || []).forEach(g => {
      if(g.type === "radio"){
        selections[g.id] = (g.defaultId ?? (g.choices?.[0]?.id));
      } else if(g.type === "check"){
        selections[g.id] = Array.isArray(g.defaultIds) ? [...g.defaultIds] : [];
      }
    });

    renderCustomGroups();
    updateCustomTotal();

    const cm = $("#customModal");
    cm.classList.add("show");
    cm.setAttribute("aria-hidden","false");
  }

  function closeCustomize(){
    const cm = $("#customModal");
    cm.classList.remove("show");
    cm.setAttribute("aria-hidden","true");
    customProduct = null;
    selections = {};
  }

  $("#closeCustom").addEventListener("click", closeCustomize);
  $("#customModal").addEventListener("click", (e) => { if(e.target.id === "customModal") closeCustomize(); });

  function renderCustomGroups(){
    const root = $("#customGroups");
    root.innerHTML = "";

    const reqCount = (customProduct.groups || []).filter(g => g.required).length;
    $("#reqNote").textContent = reqCount ? `Campos obligatorios: ${reqCount}` : "Personaliza a tu gusto.";

    (customProduct.groups || []).forEach(g => {
      const card = document.createElement("div");
      card.className = "opt-card";
      card.innerHTML = `
        <h4>${escapeHtml(g.title)} ${g.required ? "<span style='color:#111; font-weight:950;'>(Obligatorio)</span>" : "<span style='color:#6b7280;'>(Opcional)</span>"}</h4>
        <div class="opt-grid" data-group="${escapeHtml(g.id)}"></div>
      `;
      root.appendChild(card);

      const grid = card.querySelector(".opt-grid");
      if(g.type === "radio"){
        g.choices.forEach(ch => {
          const id = `g_${g.id}_${ch.id}`;
          const checked = selections[g.id] === ch.id;
          const el = document.createElement("label");
          el.className = "opt";
          el.innerHTML = `
            <input type="radio" name="${escapeHtml(g.id)}" id="${escapeHtml(id)}" ${checked ? "checked" : ""}>
            <div>
              <div style="font-weight:950;">${escapeHtml(ch.label)}</div>
              <small>${ch.add ? ("+"+money(ch.add)) : "+S/ 0.00"}</small>
            </div>
          `;
          el.addEventListener("click", () => {
            selections[g.id] = ch.id;
            renderCustomGroups();
            updateCustomTotal();
          });
          grid.appendChild(el);
        });
      } else if(g.type === "check"){
        g.choices.forEach(ch => {
          const checked = (selections[g.id] || []).includes(ch.id);
          const el = document.createElement("label");
          el.className = "opt";
          el.innerHTML = `
            <input type="checkbox" ${checked ? "checked" : ""}>
            <div>
              <div style="font-weight:950;">${escapeHtml(ch.label)}</div>
              <small>${ch.add ? ("+"+money(ch.add)) : "+S/ 0.00"}</small>
            </div>
          `;
          el.addEventListener("click", () => {
            const arr = new Set(selections[g.id] || []);
            if(arr.has(ch.id)) arr.delete(ch.id); else arr.add(ch.id);
            selections[g.id] = [...arr];
            renderCustomGroups();
            updateCustomTotal();
          });
          grid.appendChild(el);
        });
      }
    });
  }

  $("#qtyDec").addEventListener("click", () => {
    customQty = Math.max(1, customQty - 1);
    $("#qtyNum").textContent = String(customQty);
    updateCustomTotal();
  });
  $("#qtyInc").addEventListener("click", () => {
    customQty = Math.min(99, customQty + 1);
    $("#qtyNum").textContent = String(customQty);
    updateCustomTotal();
  });

  function getChoiceById(group, choiceId){
    return (group.choices || []).find(c => c.id === choiceId) || null;
  }

  function calcUnitPrice(){
    let unit = customProduct.price;
    let breakdown = [];

    (customProduct.groups || []).forEach(g => {
      if(g.type === "radio"){
        const pick = selections[g.id];
        if(g.required && !pick){
          // fallback
          selections[g.id] = g.defaultId ?? g.choices?.[0]?.id;
        }
        const ch = getChoiceById(g, selections[g.id]);
        if(ch){
          unit += Number(ch.add || 0);
          breakdown.push(`${g.title}: ${ch.label}${ch.add ? " ("+money(ch.add)+")" : ""}`);
        }
      } else if(g.type === "check"){
        const picks = selections[g.id] || [];
        picks.forEach(pid => {
          const ch = getChoiceById(g, pid);
          if(ch){
            unit += Number(ch.add || 0);
            breakdown.push(`${g.title}: ${ch.label}${ch.add ? " ("+money(ch.add)+")" : ""}`);
          }
        });
      }
    });

    return { unit, breakdown };
  }

  function updateCustomTotal(){
    if(!customProduct) return;
    const { unit, breakdown } = calcUnitPrice();
    const total = unit * customQty;
    $("#customTotal").textContent = money(total);
    $("#customBreakdown").textContent = breakdown.slice(0, 3).join(" â€¢ ") + (breakdown.length > 3 ? " â€¢ ..." : "");
  }

  $("#addFromCustom").addEventListener("click", () => {
    if(!customProduct) return;

    // valida obligatorios
    const missing = (customProduct.groups || []).filter(g => g.required).some(g => {
      if(g.type === "radio") return !selections[g.id];
      if(g.type === "check") return false;
      return false;
    });
    if(missing){
      alert("Completa las opciones obligatorias.");
      return;
    }

    const { unit, breakdown } = calcUnitPrice();

    const pretty = [];
    (customProduct.groups || []).forEach(g => {
      if(g.type === "radio"){
        const ch = getChoiceById(g, selections[g.id]);
        if(ch) pretty.push(`${g.title}: ${ch.label}`);
      } else if(g.type === "check"){
        const picks = selections[g.id] || [];
        const names = picks.map(pid => getChoiceById(g,pid)?.label).filter(Boolean);
        if(names.length) pretty.push(`${g.title}: ${names.join(", ")}`);
      }
    });

    const lineName = `${customProduct.name}` + (pretty.length ? ` â€¢ ${pretty.join(" | ")}` : "");
    const key = customProduct.id + "|" + JSON.stringify(selections);

    addToCartLine({ key, name: lineName, price: unit, qty: customQty });
    closeCustomize();
  });

  // ================== CARRITO MODAL ==================
  function openCart(){
    renderCartModal();
    $("#cartModal").style.display="block";
    $("#cartModal").setAttribute("aria-hidden","false");
  }
  function closeCart(){
    $("#cartModal").style.display="none";
    $("#cartModal").setAttribute("aria-hidden","true");
  }
  $("#openCart").addEventListener("click", openCart);
  $("#closeCart").addEventListener("click", closeCart);
  $("#cartModal").addEventListener("click", (e)=>{ if(e.target.id==="cartModal") closeCart(); });

  $("#clearCart").addEventListener("click", ()=>{ if(confirm("Â¿Vaciar carrito?")) clearCart(); });

  $("#checkout").addEventListener("click", ()=>{
    const total = cartTotal();
    if(total<=0){ alert("Tu carrito estÃ¡ vacÃ­o."); return; }
    const items = Object.values(cart).map(i => `â€¢ ${i.qty} x ${i.name} (${money(i.price)})`).join("\n");
    alert(`Pedido (demo)\n\n${items}\n\nTotal: ${money(total)}`);
  });

  function renderCartModal(){
    const root = $("#cartItems");
    root.innerHTML = "";
    const items = Object.values(cart);

    if(items.length === 0){
      root.innerHTML = `<div style="border:1px dashed rgba(0,0,0,.12); border-radius:18px; padding:12px; color:#6b7280; background:#fafafa;">
        Tu carrito estÃ¡ vacÃ­o. Agrega productos con el botÃ³n "Personalizar".
      </div>`;
      $("#cartTotalText").textContent = money(0);
      return;
    }

    items.forEach(it => {
      const row = document.createElement("div");
      row.style.cssText = "border:1px solid rgba(0,0,0,.10); border-radius:18px; padding:12px; display:flex; justify-content:space-between; gap:10px; align-items:flex-start; box-shadow: 0 10px 18px rgba(17,24,39,.06); background:#fff;";
      row.innerHTML = `
        <div style="min-width:0;">
          <div style="font-weight:950; font-size:14px; margin-bottom:6px;">${escapeHtml(it.name)}</div>
          <div style="color:#6b7280; font-size:13px;">${money(it.price)} c/u</div>
          <div style="color:#6b7280; font-size:13px;"><strong>Subtotal:</strong> ${money(it.price * it.qty)}</div>
        </div>
        <div style="display:flex; align-items:center; gap:8px;">
          <button type="button" data-act="dec" data-id="${escapeHtml(it.id)}" style="width:36px;height:36px;border-radius:14px;border:1px solid rgba(0,0,0,.10);background:#f3f4f6;font-weight:950;cursor:pointer;">âˆ’</button>
          <strong style="min-width:18px; text-align:center;">${it.qty}</strong>
          <button type="button" data-act="inc" data-id="${escapeHtml(it.id)}" style="width:36px;height:36px;border-radius:14px;border:1px solid rgba(0,0,0,.10);background:#f3f4f6;font-weight:950;cursor:pointer;">+</button>
        </div>
      `;
      root.appendChild(row);
    });

    $$("#cartItems [data-act]").forEach(btn => {
      btn.addEventListener("click", () => {
        const id = btn.dataset.id;
        const act = btn.dataset.act;
        changeQty(id, act === "inc" ? 1 : -1);
      });
    });

    $("#cartTotalText").textContent = money(cartTotal());
  }
</script>

</body>
</html>
